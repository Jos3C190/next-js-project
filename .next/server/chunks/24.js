exports.id=24,exports.ids=[24],exports.modules={34:(e,t,r)=>{Promise.resolve().then(r.bind(r,468)),Promise.resolve().then(r.bind(r,3549))},468:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\josec\\\\Documents\\\\Nueva carpeta (5)\\\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\\\next-js-project\\\\components\\\\AosInitializer.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\components\\AosInitializer.tsx","default")},538:(e,t,r)=>{"use strict";function a(){return null}r.d(t,{default:()=>a}),r(3210)},1047:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},1295:(e,t,r)=>{"use strict";r.d(t,{A:()=>m,AuthProvider:()=>c});var a=r(687),o=r(3210),i=r(9556);let n=(0,o.createContext)(null),s="auth_token",l="auth_user",d={admin:["dashboard","patients","appointments","records","treatments","payments","users","reports","statistics"],odontologo:["dashboard","patients","appointments","records","treatments"],paciente:["my-appointments"]},c=({children:e})=>{let[t,r]=(0,o.useState)(!1),[c,m]=(0,o.useState)(null),[p,u]=(0,o.useState)(null),[h,g]=(0,o.useState)(null),[y,A]=(0,o.useState)(!0),[E,f]=(0,o.useState)(null),[v,P]=(0,o.useState)(!1);(0,o.useEffect)(()=>{P(!0)},[]),(0,o.useEffect)(()=>{v&&(async()=>{try{let e=localStorage.getItem(s),t=localStorage.getItem(l);if(e&&t)try{await i.ZQ.verify(e);let a=JSON.parse(t);u(e),m(a),g(a.role),r(!0),console.log("✅ Sesi\xf3n restaurada correctamente")}catch(e){console.error("❌ Token inv\xe1lido:",e),localStorage.removeItem(s),localStorage.removeItem(l),r(!1),m(null),u(null),g(null)}else console.log("ℹ️ No hay sesi\xf3n guardada"),r(!1)}catch(e){console.error("❌ Error al cargar la autenticaci\xf3n:",e),r(!1)}finally{A(!1)}})()},[v]);let S=async e=>{f(null);try{A(!0);let t=await i.ZQ.login(e),a={id:t.user._id,nombre:t.user.nombre,apellido:t.user.apellido,correo:t.user.correo,role:t.role,telefono:t.user.telefono,especialidad:t.user.especialidad,direccion:t.user.direccion,fecha_nacimiento:t.user.fecha_nacimiento};return u(t.token),m(a),g(t.role),r(!0),v&&(localStorage.setItem(s,t.token),localStorage.setItem(l,JSON.stringify(a))),console.log("✅ Login exitoso"),!0}catch(e){return console.error("❌ Error de inicio de sesi\xf3n:",e),f("Credenciales incorrectas. Por favor, int\xe9ntelo de nuevo."),!1}finally{A(!1)}},T=async e=>{f(null);try{return A(!0),await i.ZQ.register(e),!0}catch(e){return console.error("❌ Error de registro:",e),f("Error al registrar. Por favor, int\xe9ntelo de nuevo."),!1}finally{A(!1)}};return(0,a.jsx)(n.Provider,{value:{isAuthenticated:t,user:c,token:p,userRole:h,login:S,logout:()=>{r(!1),m(null),u(null),g(null),v&&(localStorage.removeItem(s),localStorage.removeItem(l)),console.log("✅ Logout exitoso")},register:T,isLoading:y,error:E,isHydrated:v,hasAccess:e=>!!h&&(d[h]||[]).includes(e)},children:e})},m=()=>{let e=(0,o.useContext)(n);if(!e)throw Error("useAuth debe ser usado dentro de un AuthProvider");return e}},2704:()=>{},3549:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>o});var a=r(2907);let o=(0,a.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\context\\AuthContext.tsx","AuthProvider");(0,a.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\context\\AuthContext.tsx","useAuth")},4538:(e,t,r)=>{Promise.resolve().then(r.bind(r,538)),Promise.resolve().then(r.bind(r,1295))},7919:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},8014:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>l});var a=r(7413),o=r(1421),i=r.n(o),n=r(3549),s=r(468);r(2704);let l={title:"Clinica Dental Dr. Linares",description:"Servicios dentales profesionales"};function d({children:e}){return(0,a.jsx)("html",{lang:"es",children:(0,a.jsx)("body",{className:i().className,children:(0,a.jsxs)(n.AuthProvider,{children:[(0,a.jsx)(s.default,{}),e]})})})}},9556:(e,t,r)=>{"use strict";async function a(e,t={},r){let o=`http://localhost:5000${e}`,i={"Content-Type":"application/json",...t.headers};r&&(i.Authorization=`Bearer ${r}`);let n={...t,headers:i},s=await fetch(o,n);if(!s.ok){let e=`Error ${s.status}: ${s.statusText}`;try{let t=await s.json();t.message?e=t.message:t.error?e=t.error:t.errors&&Array.isArray(t.errors)&&(e=t.errors.join(", "))}catch(e){}if(401===s.status)throw Error("Token inv\xe1lido");throw Error(e)}return s.json()}r.d(t,{Cx:()=>l,WO:()=>d,ZQ:()=>o,Zi:()=>n,rQ:()=>s,rn:()=>i,u2:()=>c});let o={login:async e=>a("/api/auth/login",{method:"POST",body:JSON.stringify(e)}),register:async e=>a("/api/auth/register",{method:"POST",body:JSON.stringify(e)}),verify:async e=>a("/api/auth/verify",{method:"GET"},e)},i=e=>({getPatients:(t=1,r=10)=>a(`/pacientes?page=${t}&limit=${r}`,{method:"GET"},e),getPatientById:t=>a(`/pacientes/${t}`,{method:"GET"},e),createPatient:t=>a("/pacientes",{method:"POST",body:JSON.stringify(t)},e),updatePatient:(t,r)=>a(`/pacientes/${t}`,{method:"PUT",body:JSON.stringify(r)},e),deletePatient:t=>a(`/pacientes/${t}`,{method:"DELETE"},e)}),n=e=>({getAppointments:(t=1,r=10)=>a(`/api/citas?page=${t}&limit=${r}`,{method:"GET"},e),getAppointmentById:t=>a(`/api/citas/${t}`,{method:"GET"},e),createAppointment:t=>a("/api/citas",{method:"POST",body:JSON.stringify(t)},e),updateAppointment:(t,r)=>a(`/api/citas/${t}`,{method:"PUT",body:JSON.stringify(r)},e),deleteAppointment:t=>a(`/api/citas/${t}`,{method:"DELETE"},e)}),s=e=>({getDentists:(t=1,r=100)=>a(`/odontologos?page=${t}&limit=${r}`,{method:"GET"},e)}),l=e=>({getMedicalRecords:(t=1,r=10)=>a(`/api/expedientes?page=${t}&limit=${r}`,{method:"GET"},e),getMedicalRecordById:t=>a(`/api/expedientes/${t}`,{method:"GET"},e),createMedicalRecord:t=>a("/api/expedientes",{method:"POST",body:JSON.stringify(t)},e),updateMedicalRecord:(t,r)=>a(`/api/expedientes/${t}`,{method:"PUT",body:JSON.stringify(r)},e),deleteMedicalRecord:t=>a(`/api/expedientes/${t}`,{method:"DELETE"},e),getAllPatients:async()=>{try{let t=await a("/pacientes?page=1&limit=1",{method:"GET"},e);if(!t||!t.pagination||"number"!=typeof t.pagination.total)return{data:Array.isArray(t?.data)?t.data:[]};let r=t.pagination.total;if(r>1){let t=await a(`/pacientes?limit=${r}`,{method:"GET"},e);return{data:Array.isArray(t?.data)?t.data:[]}}return{data:Array.isArray(t.data)?t.data:[]}}catch(e){return console.error("Error loading patients:",e),{data:[]}}}}),d=e=>({getTreatments:async(t=1,r=10)=>{try{let o=await a(`/api/tratamientos?page=${t}&limit=${r}`,{method:"GET"},e);if(!o||!Array.isArray(o.data))return{data:[],pagination:{total:0,page:1,limit:r,totalPages:0}};return o}catch(e){return console.error("Error loading treatments:",e),{data:[],pagination:{total:0,page:1,limit:r,totalPages:0}}}},getTreatmentById:t=>a(`/api/tratamientos/${t}`,{method:"GET"},e),createTreatment:t=>a("/api/tratamientos",{method:"POST",body:JSON.stringify(t)},e),updateTreatment:(t,r)=>a(`/api/tratamientos/${t}`,{method:"PUT",body:JSON.stringify(r)},e),deleteTreatment:t=>a(`/api/tratamientos/${t}`,{method:"DELETE"},e),getAllPatients:async()=>{try{let t=await a("/pacientes?page=1&limit=1",{method:"GET"},e);if(!t||!t.pagination||"number"!=typeof t.pagination.total)return{data:Array.isArray(t?.data)?t.data:[]};let r=t.pagination.total;if(r>1){let t=await a(`/pacientes?limit=${r}`,{method:"GET"},e);return{data:Array.isArray(t?.data)?t.data:[]}}return{data:Array.isArray(t.data)?t.data:[]}}catch(e){return console.error("Error loading patients:",e),{data:[]}}},getAllDentists:async()=>{try{let t=await a("/odontologos?page=1&limit=1",{method:"GET"},e);if(!t||!t.pagination||"number"!=typeof t.pagination.total)return{data:Array.isArray(t?.data)?t.data:[]};let r=t.pagination.total;if(r>1){let t=await a(`/odontologos?limit=${r}`,{method:"GET"},e);return{data:Array.isArray(t?.data)?t.data:[]}}return{data:Array.isArray(t.data)?t.data:[]}}catch(e){return console.error("Error loading dentists:",e),{data:[]}}}}),c=e=>({getMyAppointments:(t=1,r=10)=>a(`/api/citas?page=${t}&limit=${r}`,{method:"GET"},e),createMyAppointment:t=>a("/api/citas",{method:"POST",body:JSON.stringify(t)},e),cancelMyAppointment:t=>a(`/api/citas/${t}/cancelar`,{method:"PATCH"},e)})}};