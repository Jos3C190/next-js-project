(()=>{var e={};e.id=912,e.ids=[912],e.modules={64:(e,r,a)=>{"use strict";a.d(r,{A:()=>l});var s=a(687),t=a(7033),o=a(4952),i=a(6001);let l=({currentPage:e,totalPages:r,onPageChange:a})=>{if(r<=1)return null;let l=s=>{s>=1&&s<=r&&s!==e&&a(s)};return(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 border-t border-[hsl(var(--border))]",children:[(0,s.jsxs)("div",{className:"flex flex-1 justify-between sm:hidden",children:[(0,s.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l(e-1),disabled:1===e,className:`relative inline-flex items-center rounded-md px-4 py-2 text-sm font-medium transition-colors duration-200 ${1===e?"bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))] cursor-not-allowed":"bg-[hsl(var(--card))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"}`,"aria-label":"Previous page",children:"Anterior"}),(0,s.jsxs)("span",{className:"text-sm text-[hsl(var(--foreground))]",children:["P\xe1gina ",e," de ",r]}),(0,s.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l(e+1),disabled:e===r,className:`relative ml-3 inline-flex items-center rounded-md px-4 py-2 text-sm font-medium transition-colors duration-200 ${e===r?"bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))] cursor-not-allowed":"bg-[hsl(var(--card))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"}`,"aria-label":"Next page",children:"Siguiente"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-[hsl(var(--foreground))]",children:["Mostrando p\xe1gina ",(0,s.jsx)("span",{className:"font-medium",children:e})," de"," ",(0,s.jsx)("span",{className:"font-medium",children:r})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[(0,s.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(e-1),disabled:1===e,className:`relative inline-flex items-center rounded-l-md px-2 py-2 transition-colors duration-200 ${1===e?"cursor-not-allowed bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))]":"text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"}`,"aria-label":"Previous page",children:(0,s.jsx)(t.A,{className:"h-5 w-5","aria-hidden":"true"})}),(()=>{let a=[];if(r<=5)for(let e=1;e<=r;e++)a.push(e);else{a.push(1);let s=Math.max(2,e-1),t=Math.min(r-1,e+1);e<=2&&(t=4),e>=r-1&&(s=r-3),s>2&&a.push(-1);for(let e=s;e<=t;e++)a.push(e);t<r-1&&a.push(-2),a.push(r)}return a})().map((r,a)=>r<0?(0,s.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-[hsl(var(--foreground))] border border-[hsl(var(--border))]",children:"..."},`ellipsis-${a}`):(0,s.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(r),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold transition-colors duration-200 ${r===e?"bg-red-400 text-white border border-red-400 focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-400":"text-[hsl(var(--foreground))] border border-[hsl(var(--border))] hover:bg-[hsl(var(--secondary))] focus:z-20 focus:outline-offset-0"}`,"aria-current":r===e?"page":void 0,children:r},r)),(0,s.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(e+1),disabled:e===r,className:`relative inline-flex items-center rounded-r-md px-2 py-2 transition-colors duration-200 ${e===r?"cursor-not-allowed bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))]":"text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"}`,"aria-label":"Next page",children:(0,s.jsx)(o.A,{className:"h-5 w-5","aria-hidden":"true"})})]})})]})]})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1132:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>E});var s=a(687),t=a(3210),o=a(6189),i=a(1295),l=a(3570),n=a(8122),d=a(7033),c=a(3143),h=a(8233),m=a(8492),x=a(6474),u=a(9270),p=a(3861),b=a(6001),f=a(8559),v=a(1860),g=a(8819);let j=({patient:e,onSave:r,onCancel:a})=>{let[o,i]=(0,t.useState)({nombre:"",apellido:"",correo:"",telefono:"",direccion:"",fecha_nacimiento:"",historia_clinica:"",password:""}),[l,n]=(0,t.useState)({}),[d,c]=(0,t.useState)(!1);(0,t.useEffect)(()=>{e&&i({nombre:e.nombre||"",apellido:e.apellido||"",correo:e.correo||"",telefono:e.telefono||"",direccion:e.direccion||"",fecha_nacimiento:e.fecha_nacimiento?e.fecha_nacimiento.split("T")[0]:"",historia_clinica:e.historia_clinica||"",password:""})},[e]);let h=()=>{let r={};if(o.nombre.trim()?o.nombre.trim().length<2&&(r.nombre="El nombre debe tener al menos 2 caracteres"):r.nombre="El nombre es obligatorio",o.apellido.trim()?o.apellido.trim().length<2&&(r.apellido="El apellido debe tener al menos 2 caracteres"):r.apellido="El apellido es obligatorio",o.telefono.trim()?o.telefono.trim().length<8&&(r.telefono="El tel\xe9fono debe tener al menos 8 d\xedgitos"):r.telefono="El tel\xe9fono es obligatorio",o.correo.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.correo)||(r.correo="El correo no es v\xe1lido"):r.correo="El correo es obligatorio",o.direccion.trim()?o.direccion.trim().length<5&&(r.direccion="La direcci\xf3n debe tener al menos 5 caracteres"):r.direccion="La direcci\xf3n es obligatoria",o.fecha_nacimiento){let e=new Date(o.fecha_nacimiento),a=new Date,s=a.getFullYear()-e.getFullYear();isNaN(e.getTime())?r.fecha_nacimiento="Fecha de nacimiento inv\xe1lida":e>a?r.fecha_nacimiento="La fecha de nacimiento no puede ser futura":s>120&&(r.fecha_nacimiento="La fecha de nacimiento no es realista")}else r.fecha_nacimiento="La fecha de nacimiento es obligatoria";return e||o.password?!e&&o.password&&o.password.length<6&&(r.password="La contrase\xf1a debe tener al menos 6 caracteres"):r.password="La contrase\xf1a es obligatoria para nuevos pacientes",n(r),0===Object.keys(r).length},m=e=>{let{name:r,value:a}=e.target;i({...o,[r]:a}),l[r]&&n({...l,[r]:""})},x=async a=>{if(a.preventDefault(),h()){c(!0);try{let a={...o};if(e&&!a.password&&delete a.password,Object.keys(a).forEach(e=>{let r=a[e];"string"==typeof r&&(a[e]=r.trim())}),a.fecha_nacimiento){let e=new Date(a.fecha_nacimiento+"T00:00:00.000Z");if(isNaN(e.getTime()))throw Error("Fecha de nacimiento inv\xe1lida")}for(let e of["nombre","apellido","correo","telefono","direccion"]){let r=a[e];if(!r||"string"==typeof r&&""===r.trim())throw Error(`El campo ${e} es requerido`)}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.correo))throw Error("El formato del correo electr\xf3nico no es v\xe1lido");await r(a)}catch(e){console.error("Error al guardar:",e),e instanceof Error?alert(`Error: ${e.message}`):alert("Error desconocido al guardar el paciente")}finally{c(!1)}}};return(0,s.jsxs)(b.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:e?"Editar Paciente":"Nuevo Paciente"}),(0,s.jsxs)(b.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(f.A,{className:"h-5 w-5 mr-1"}),"Volver"]})]}),(0,s.jsx)("div",{className:"bg-[hsl(var(--card))] shadow-md rounded-lg p-6 transition-colors duration-200",children:(0,s.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"nombre",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Nombre ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"nombre",name:"nombre",required:!0,value:o.nombre,onChange:m,className:`w-full px-3 py-2 border ${l.nombre?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"} rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200`}),l.nombre&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:l.nombre})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"apellido",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Apellido ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"apellido",name:"apellido",required:!0,value:o.apellido,onChange:m,className:`w-full px-3 py-2 border ${l.apellido?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"} rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200`}),l.apellido&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:l.apellido})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"correo",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Correo ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"email",id:"correo",name:"correo",required:!0,value:o.correo,onChange:m,className:`w-full px-3 py-2 border ${l.correo?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"} rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200`}),l.correo&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:l.correo})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"telefono",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Tel\xe9fono ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"tel",id:"telefono",name:"telefono",required:!0,value:o.telefono,onChange:m,className:`w-full px-3 py-2 border ${l.telefono?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"} rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200`}),l.telefono&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:l.telefono})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"fecha_nacimiento",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Fecha de Nacimiento ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"date",id:"fecha_nacimiento",name:"fecha_nacimiento",required:!0,value:o.fecha_nacimiento,onChange:m,className:`w-full px-3 py-2 border ${l.fecha_nacimiento?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"} rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200`}),l.fecha_nacimiento&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:l.fecha_nacimiento})]}),!e&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"password",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Contrase\xf1a ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"password",id:"password",name:"password",required:!e,value:o.password||"",onChange:m,className:`w-full px-3 py-2 border ${l.password?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"} rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200`}),l.password&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:l.password}),e&&(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Dejar en blanco para mantener la contrase\xf1a actual"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("label",{htmlFor:"direccion",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Direcci\xf3n ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("textarea",{id:"direccion",name:"direccion",rows:2,required:!0,value:o.direccion,onChange:m,className:`w-full px-3 py-2 border ${l.direccion?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"} rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200`}),l.direccion&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:l.direccion})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("label",{htmlFor:"historia_clinica",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Historia Cl\xednica ",(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:"(Opcional)"})]}),(0,s.jsx)("textarea",{id:"historia_clinica",name:"historia_clinica",rows:4,value:o.historia_clinica,onChange:m,className:"w-full px-3 py-2 border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t mt-6",children:[(0,s.jsxs)(b.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:a,className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] flex items-center transition-colors duration-200",disabled:d,children:[(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),(0,s.jsxs)(b.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500 flex items-center",disabled:d,children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-2"}),d?"Guardando...":"Guardar"]})]})]})})]})};var N=a(64),y=a(4994),w=a(9556);function k(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}let A=()=>{let{isAuthenticated:e,isHydrated:r,token:a,userRole:o}=(0,i.A)(),[l,f]=(0,t.useState)([]),[v,g]=(0,t.useState)(!1),[A,E]=(0,t.useState)(null),[C,P]=(0,t.useState)(""),[D,S]=(0,t.useState)("list"),[T,_]=(0,t.useState)(1),[L,O]=(0,t.useState)(!1),[M,$]=(0,t.useState)(!0),[F,H]=(0,t.useState)(!1),[q,R]=(0,t.useState)(1),[I,G]=(0,t.useState)(0),[z,V]=(0,t.useState)(null),[W,Y]=(0,t.useState)(!1),[B,K]=(0,t.useState)(null),[X,Z]=(0,t.useState)(!1),[J,Q]=(0,t.useState)({age:"Todos",lastVisit:"Cualquier fecha",status:"Todos",historiaClinica:"Todos"}),[U,ee]=(0,t.useState)(!1),er=a?(0,w.rn)(a):null,ea=async(r=1,s=!1)=>{if(!e||!a||!er){$(!1);return}try{s?H(!0):$(!0),V(null);let e=await er.getPatients(r,10);e&&e.data&&Array.isArray(e.data)?(f(e.data),R(e.pagination?.totalPages||1),G(e.pagination?.total||0),_(r)):(console.error("Respuesta de API inv\xe1lida:",e),f([]),R(1),G(0))}catch(e){console.error("Error cargando pacientes:",e),V("Error al cargar los pacientes"),f([])}finally{$(!1),H(!1)}};(0,t.useEffect)(()=>{r&&(e&&a?ea(1):$(!1))},[r,e,a]);let es=e=>{E(e),g(!0),S("edit")},et=e=>{E(e),S("view")},eo=e=>{K(e),Y(!0)},ei=async()=>{if(er&&B){Z(!0);try{await er.deletePatient(B._id),await ea(T),Y(!1),K(null)}catch(e){console.error("Error eliminando paciente:",e),alert("Error al eliminar el paciente")}finally{Z(!1)}}},el=()=>{X||(Y(!1),K(null))},en=async e=>{if(er)try{A?await er.updatePatient(A._id,e):await er.createPatient(e),await ea(T),g(!1),S("list")}catch(e){throw console.error("Error guardando paciente:",e),e}},ed=()=>{ea(T,!0)},ec=(0,t.useMemo)(()=>{if(!Array.isArray(l))return[];let e=k(C);return l.filter(r=>{if(!(k(`${r.nombre} ${r.apellido}`).includes(e)||k(r.correo).includes(e)||k(r.telefono).includes(e)))return!1;if(!U)return!0;if("Todos"!==J.age){let e=new Date(r.fecha_nacimiento),a=new Date,s=a.getFullYear()-e.getFullYear(),t=a.getMonth()>e.getMonth()||a.getMonth()===e.getMonth()&&a.getDate()>=e.getDate()?s:s-1;if("18-30 a\xf1os"===J.age&&(t<18||t>30)||"31-50 a\xf1os"===J.age&&(t<31||t>50)||"51+ a\xf1os"===J.age&&t<51)return!1}return"Todos"===J.historiaClinica||("Con historia"!==J.historiaClinica||!!r.historia_clinica)&&("Sin historia"!==J.historiaClinica||!r.historia_clinica)})},[l,C,J,U]),eh=e=>{let{name:r,value:a}=e.target;Q(e=>({...e,[r]:a}))},em={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return!r||M?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-40 animate-pulse"})]}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6",children:(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,s.jsx)("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"},r))})}),(0,s.jsxs)("div",{className:"text-center text-sm text-gray-500",children:["Estado: ",r?"Cargando pacientes...":"Hidratando..."]})]}):z?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Gesti\xf3n de Pacientes"}),(0,s.jsxs)("button",{onClick:ed,className:"flex items-center px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Reintentar"]})]}),(0,s.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:(0,s.jsx)("p",{className:"text-red-600 dark:text-red-400",children:z})})]}):e?"view"===D&&A?(0,s.jsxs)(b.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Detalles del Paciente"}),(0,s.jsxs)(b.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>S("list"),className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] flex items-center transition-colors duration-200",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-1"}),"Volver"]})]}),(0,s.jsxs)(b.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3},className:"bg-[hsl(var(--card))] transition-colors duration-200 shadow-md rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-[hsl(var(--foreground))] mb-4 pb-2 border-b border-[hsl(var(--border))]",children:"Informaci\xf3n Personal"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Nombre:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:`${A.nombre} ${A.apellido}`})]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Correo:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:A.correo})]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Tel\xe9fono:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:A.telefono})]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Fecha de Nacimiento:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:new Date(A.fecha_nacimiento).toLocaleDateString("es-ES")})]}),(0,s.jsxs)("p",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Direcci\xf3n:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:A.direccion})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-[hsl(var(--foreground))] mb-4 pb-2 border-b border-[hsl(var(--border))]",children:"Historia Cl\xednica"}),(0,s.jsx)("div",{className:"bg-[hsl(var(--secondary))] transition-colors duration-200 p-4 rounded-md min-h-48",children:A.historia_clinica?(0,s.jsx)("p",{className:"text-[hsl(var(--foreground))]",children:A.historia_clinica}):(0,s.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] italic",children:"No hay historia cl\xednica disponible."})})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex space-x-4 justify-end",children:[(0,s.jsxs)(b.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>es(A),className:"px-4 py-2 bg-amber-400 text-white rounded-md hover:bg-amber-500 flex items-center",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Editar"]}),"odontologo"!==o&&(0,s.jsxs)(b.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>eo(A),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 flex items-center",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]})]}),(0,s.jsx)(y.A,{isOpen:W,onClose:el,onConfirm:ei,title:"Eliminar Paciente",message:`\xbfEst\xe1 seguro que desea eliminar al paciente ${B?.nombre} ${B?.apellido}? Esta acci\xf3n no se puede deshacer.`,confirmText:"Eliminar",cancelText:"Cancelar",type:"danger",isLoading:X})]}):"edit"===D?(0,s.jsx)(j,{patient:A,onSave:en,onCancel:()=>{g(!1),S("list")}}):(0,s.jsxs)(b.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Gesti\xf3n de Pacientes"}),(0,s.jsxs)("p",{className:"text-sm text-[hsl(var(--muted-foreground))] mt-1",children:["Total: ",I," pacientes"]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)(b.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ed,disabled:F,className:"flex items-center px-3 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] transition-colors duration-200 disabled:opacity-50",children:[(0,s.jsx)(n.A,{className:`h-4 w-4 mr-2 ${F?"animate-spin":""}`}),F?"Actualizando...":"Actualizar"]}),(0,s.jsxs)(b.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(!L),className:`flex items-center px-3 py-2 border rounded-md text-sm font-medium transition-colors duration-200 ${U?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-800 text-red-700 dark:text-red-400":"bg-[hsl(var(--card))] border-[hsl(var(--border))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--card-hover))]"}`,children:[(0,s.jsx)(m.A,{className:`h-4 w-4 mr-2 ${U?"text-red-500 dark:text-red-400":"text-[hsl(var(--muted-foreground))]"}`}),"Filtros",U&&(0,s.jsx)("span",{className:"ml-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 text-xs font-semibold px-1.5 py-0.5 rounded-full",children:"Activos"})]}),"odontologo"!==o&&(0,s.jsxs)(b.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{E(null),g(!0),S("edit")},className:"flex items-center px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500",children:[(0,s.jsx)(x.A,{className:"h-5 w-5 mr-1"}),"Nuevo Paciente"]})]})]}),L&&(0,s.jsxs)(b.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-[hsl(var(--card))] p-4 rounded-lg shadow-md transition-colors duration-200",children:[(0,s.jsx)("h3",{className:"font-medium text-[hsl(var(--foreground))] mb-3",children:"Filtros avanzados"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Edad"}),(0,s.jsxs)("select",{name:"age",value:J.age,onChange:eh,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,s.jsx)("option",{children:"Todos"}),(0,s.jsx)("option",{children:"18-30 a\xf1os"}),(0,s.jsx)("option",{children:"31-50 a\xf1os"}),(0,s.jsx)("option",{children:"51+ a\xf1os"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Historia Cl\xednica"}),(0,s.jsxs)("select",{name:"historiaClinica",value:J.historiaClinica,onChange:eh,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,s.jsx)("option",{children:"Todos"}),(0,s.jsx)("option",{children:"Con historia"}),(0,s.jsx)("option",{children:"Sin historia"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,s.jsx)("button",{onClick:()=>{Q({age:"Todos",lastVisit:"Cualquier fecha",status:"Todos",historiaClinica:"Todos"}),ee(!1)},className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] mr-2 transition-colors duration-200",children:"Limpiar"}),(0,s.jsx)("button",{onClick:()=>{ee(!0)},className:"px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500 transition-colors duration-200",children:"Aplicar filtros"})]})]}),(0,s.jsxs)("div",{className:"bg-[hsl(var(--card))] transition-colors duration-200 shadow-md rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-[hsl(var(--border))]",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(u.A,{className:"h-5 w-5 text-[hsl(var(--muted-foreground))]"})}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar pacientes por nombre, correo o tel\xe9fono...",className:"pl-10 pr-4 py-2 w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",value:C,onChange:e=>{P(e.target.value)}})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(b.P.table,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},initial:"hidden",animate:"visible",className:"min-w-full divide-y divide-[hsl(var(--border))]",children:[(0,s.jsx)("thead",{className:"bg-[hsl(var(--secondary))]",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Nombre"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Correo"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Tel\xe9fono"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Fecha de Nacimiento"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-[hsl(var(--card))] transition-colors duration-200 divide-y divide-[hsl(var(--border))]",children:ec.map(e=>(0,s.jsxs)(b.P.tr,{variants:em,className:"hover:bg-[hsl(var(--card-hover))] transition-colors duration-150",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-[hsl(var(--foreground))]",children:`${e.nombre} ${e.apellido}`})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:e.correo})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:e.telefono})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:new Date(e.fecha_nacimiento).toLocaleDateString("es-ES")})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(b.P.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>et(e),className:"text-[hsl(var(--muted-foreground))] hover:text-[hsl(var(--foreground))] p-1 rounded-full hover:bg-[hsl(var(--secondary))] transition-colors duration-200",title:"Ver detalles",children:(0,s.jsx)(p.A,{className:"h-5 w-5"})}),(0,s.jsx)(b.P.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>es(e),className:"text-amber-500 hover:text-amber-600 p-1 rounded-full hover:bg-amber-50 dark:hover:bg-amber-900/20",title:"Editar",children:(0,s.jsx)(c.A,{className:"h-5 w-5"})}),"odontologo"!==o&&(0,s.jsx)(b.P.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>eo(e),className:"text-red-500 hover:text-red-600 p-1 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20",title:"Eliminar",children:(0,s.jsx)(h.A,{className:"h-5 w-5"})})]})})]},e._id))})]})}),0===ec.length?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsxs)(b.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 text-[hsl(var(--muted-foreground))] mb-3"}),(0,s.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] text-lg",children:"No se encontraron pacientes"}),(0,s.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] text-sm mt-1",children:"Intenta con otra b\xfasqueda o agrega un nuevo paciente"})]})}):(0,s.jsx)(N.A,{currentPage:T,totalPages:q,onPageChange:e=>{ea(e)}})]}),(0,s.jsx)(y.A,{isOpen:W,onClose:el,onConfirm:ei,title:"Eliminar Paciente",message:`\xbfEst\xe1 seguro que desea eliminar al paciente ${B?.nombre} ${B?.apellido}? Esta acci\xf3n no se puede deshacer.`,confirmText:"Eliminar",cancelText:"Cancelar",type:"danger",isLoading:X})]}):(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-6 text-center",children:(0,s.jsx)("p",{className:"text-amber-600 dark:text-amber-400",children:"Debes iniciar sesi\xf3n para ver los pacientes"})})})};function E(){(0,o.useRouter)();let{isAuthenticated:e}=(0,i.A)(),[r,a]=(0,t.useState)(!1);return r?r&&!e?null:(0,s.jsx)(l.A,{children:(0,s.jsx)(A,{})}):(0,s.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Cargando..."})})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3143:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(2688).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3861:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(2688).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3873:e=>{"use strict";e.exports=require("path")},5483:(e,r,a)=>{Promise.resolve().then(a.bind(a,1132))},5947:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});let s=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\josec\\\\Documents\\\\Nueva carpeta (5)\\\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\\\next-js-project\\\\app\\\\dashboard\\\\patients\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\app\\dashboard\\patients\\page.tsx","default")},6474:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(2688).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7033:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(2688).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7771:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>i.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=a(5239),t=a(8088),o=a(8170),i=a.n(o),l=a(893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);a.d(r,n);let d={children:["",{children:["dashboard",{children:["patients",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,5947)),"D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\app\\dashboard\\patients\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3249)),"D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,8014)),"D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\app\\dashboard\\patients\\page.tsx"],h={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/dashboard/patients/page",pathname:"/dashboard/patients",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8122:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(2688).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8233:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(2688).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8492:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(2688).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8559:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(2688).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8819:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(2688).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9270:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(2688).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9827:(e,r,a)=>{Promise.resolve().then(a.bind(a,5947))}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),s=r.X(0,[357,625,24,77],()=>a(7771));module.exports=s})();