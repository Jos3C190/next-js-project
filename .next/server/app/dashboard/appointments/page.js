(()=>{var e={};e.id=876,e.ids=[876],e.modules={64:(e,r,a)=>{"use strict";a.d(r,{A:()=>l});var t=a(687),s=a(7033),o=a(4952),d=a(6001);let l=({currentPage:e,totalPages:r,onPageChange:a})=>{if(r<=1)return null;let l=t=>{t>=1&&t<=r&&t!==e&&a(t)};return(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 border-t border-[hsl(var(--border))]",children:[(0,t.jsxs)("div",{className:"flex flex-1 justify-between sm:hidden",children:[(0,t.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l(e-1),disabled:1===e,className:`relative inline-flex items-center rounded-md px-4 py-2 text-sm font-medium transition-colors duration-200 ${1===e?"bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))] cursor-not-allowed":"bg-[hsl(var(--card))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"}`,"aria-label":"Previous page",children:"Anterior"}),(0,t.jsxs)("span",{className:"text-sm text-[hsl(var(--foreground))]",children:["P\xe1gina ",e," de ",r]}),(0,t.jsx)(d.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l(e+1),disabled:e===r,className:`relative ml-3 inline-flex items-center rounded-md px-4 py-2 text-sm font-medium transition-colors duration-200 ${e===r?"bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))] cursor-not-allowed":"bg-[hsl(var(--card))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"}`,"aria-label":"Next page",children:"Siguiente"})]}),(0,t.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-sm text-[hsl(var(--foreground))]",children:["Mostrando p\xe1gina ",(0,t.jsx)("span",{className:"font-medium",children:e})," de"," ",(0,t.jsx)("span",{className:"font-medium",children:r})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[(0,t.jsx)(d.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(e-1),disabled:1===e,className:`relative inline-flex items-center rounded-l-md px-2 py-2 transition-colors duration-200 ${1===e?"cursor-not-allowed bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))]":"text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"}`,"aria-label":"Previous page",children:(0,t.jsx)(s.A,{className:"h-5 w-5","aria-hidden":"true"})}),(()=>{let a=[];if(r<=5)for(let e=1;e<=r;e++)a.push(e);else{a.push(1);let t=Math.max(2,e-1),s=Math.min(r-1,e+1);e<=2&&(s=4),e>=r-1&&(t=r-3),t>2&&a.push(-1);for(let e=t;e<=s;e++)a.push(e);s<r-1&&a.push(-2),a.push(r)}return a})().map((r,a)=>r<0?(0,t.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-[hsl(var(--foreground))] border border-[hsl(var(--border))]",children:"..."},`ellipsis-${a}`):(0,t.jsx)(d.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(r),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold transition-colors duration-200 ${r===e?"bg-red-400 text-white border border-red-400 focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-400":"text-[hsl(var(--foreground))] border border-[hsl(var(--border))] hover:bg-[hsl(var(--secondary))] focus:z-20 focus:outline-offset-0"}`,"aria-current":r===e?"page":void 0,children:r},r)),(0,t.jsx)(d.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(e+1),disabled:e===r,className:`relative inline-flex items-center rounded-r-md px-2 py-2 transition-colors duration-200 ${e===r?"cursor-not-allowed bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))]":"text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"}`,"aria-label":"Next page",children:(0,t.jsx)(o.A,{className:"h-5 w-5","aria-hidden":"true"})})]})})]})]})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3143:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2688).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3613:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2688).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3861:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2688).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3873:e=>{"use strict";e.exports=require("path")},4159:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});let t=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\josec\\\\Documents\\\\Nueva carpeta (5)\\\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\\\next-js-project\\\\app\\\\dashboard\\\\appointments\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\app\\dashboard\\appointments\\page.tsx","default")},5219:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>d.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>m,tree:()=>i});var t=a(5239),s=a(8088),o=a(8170),d=a.n(o),l=a(893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);a.d(r,n);let i={children:["",{children:["dashboard",{children:["appointments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4159)),"D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\app\\dashboard\\appointments\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3249)),"D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,8014)),"D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["D:\\josec\\Documents\\Nueva carpeta (5)\\APLICACI\xd3N DE METODOLOG\xcdAS \xc1GILES DE DESARROLLO DE SOFTWARE\\next-js-project\\app\\dashboard\\appointments\\page.tsx"],h={require:a,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/dashboard/appointments/page",pathname:"/dashboard/appointments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},6354:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>I});var t=a(687),s=a(3210),o=a(6189),d=a(1295),l=a(3570),n=a(8122),i=a(8492),c=a(6474),h=a(9270),m=a(3861),u=a(3143),x=a(8233),p=a(6001),v=a(9556),g=a(8559),b=a(3613),f=a(1860),j=a(8819);let y=({appointment:e,onSave:r,onCancel:a,dentists:o,patients:d})=>{let l=new Date().toISOString().split("T")[0],[n,i]=(0,s.useState)({pacienteId:"",pacienteNombre:"",odontologoId:"",fecha:"",hora:"",motivo:"",estado:"pendiente"}),[c,h]=(0,s.useState)({}),[m,u]=(0,s.useState)(!1),[x,v]=(0,s.useState)("");(0,s.useEffect)(()=>{if(e){let r=e.fecha.split("T")[0];i({pacienteId:e.pacienteId?._id||"",pacienteNombre:e.pacienteId?`${e.pacienteId.nombre} ${e.pacienteId.apellido}`:e.pacienteTemporalId?`${e.pacienteTemporalId.nombre} ${e.pacienteTemporalId.apellido}`:"Paciente temporal",odontologoId:e.odontologoId._id,fecha:r,hora:e.hora,motivo:e.motivo,estado:e.estado})}else i({pacienteId:"",pacienteNombre:"",odontologoId:o.length>0?o[0]._id:"",fecha:l,hora:"09:00",motivo:"",estado:"pendiente"})},[e,l,o]);let y=()=>{let r={};return e||n.pacienteId||(r.pacienteId="Debe seleccionar un paciente"),n.odontologoId||(r.odontologoId="Debe seleccionar un odont\xf3logo"),n.fecha?!e&&n.fecha<l&&(r.fecha="No se puede seleccionar una fecha anterior a la actual"):r.fecha="La fecha es obligatoria",n.hora||(r.hora="La hora es obligatoria"),n.motivo.trim()||(r.motivo="El motivo es obligatorio"),h(r),0===Object.keys(r).length},N=e=>{let{name:r,value:a}=e.target;if(i({...n,[r]:a}),"pacienteId"===r&&a){let e=d.find(e=>e._id===a);e&&i(r=>({...r,pacienteId:a,pacienteNombre:`${e.nombre} ${e.apellido}`}))}c[r]&&h({...c,[r]:""}),x&&v("")},w=async a=>{if(a.preventDefault(),y()){u(!0),v("");try{let a={fecha:n.fecha,hora:n.hora,motivo:n.motivo,estado:n.estado};e||(a.pacienteId=n.pacienteId,a.odontologoId=n.odontologoId),await r(a)}catch(e){console.error("Error al guardar:",e),e instanceof Error?v(e.message):v("Ocurri\xf3 un error inesperado al guardar la cita")}finally{u(!1)}}};return(0,t.jsxs)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:e?"Editar Cita":"Nueva Cita"}),(0,t.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"flex items-center text-[hsl(var(--muted-foreground))] hover:text-[hsl(var(--foreground))] transition-colors duration-200",children:[(0,t.jsx)(g.A,{className:"h-5 w-5 mr-1"}),"Volver"]})]}),(0,t.jsxs)("div",{className:"bg-[hsl(var(--card))] shadow-md rounded-lg p-6 transition-colors duration-200",children:[x&&(0,t.jsx)(p.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(b.A,{className:"h-5 w-5 text-red-500 dark:text-red-400 mr-2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-400",children:"Error al guardar la cita"}),(0,t.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:x})]})]})}),(0,t.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"pacienteId",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Paciente ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),e?(0,t.jsx)("div",{className:"w-full px-3 py-2 border border-[hsl(var(--border))] bg-[hsl(var(--muted))] text-[hsl(var(--foreground))] rounded-md opacity-75",children:n.pacienteNombre}):(0,t.jsxs)("select",{id:"pacienteId",name:"pacienteId",required:!0,value:n.pacienteId,onChange:N,className:`w-full px-3 py-2 border ${c.pacienteId?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"} text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200 max-h-32 overflow-y-auto`,children:[(0,t.jsx)("option",{value:"",children:"Seleccionar paciente"}),d.map(e=>(0,t.jsxs)("option",{value:e._id,children:[e.nombre," ",e.apellido," - ",e.correo]},e._id))]}),e&&(0,t.jsx)("p",{className:"mt-1 text-xs text-[hsl(var(--muted-foreground))]",children:"El paciente no se puede modificar en edici\xf3n"}),c.pacienteId&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:c.pacienteId})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"odontologoId",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Odont\xf3logo ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),e?(0,t.jsx)("div",{className:"w-full px-3 py-2 border border-[hsl(var(--border))] bg-[hsl(var(--muted))] text-[hsl(var(--foreground))] rounded-md opacity-75",children:e.odontologoId?`${e.odontologoId.nombre} ${e.odontologoId.apellido} - ${e.odontologoId.especialidad}`:"Odont\xf3logo no disponible"}):(0,t.jsxs)("select",{id:"odontologoId",name:"odontologoId",required:!0,value:n.odontologoId,onChange:N,className:`w-full px-3 py-2 border ${c.odontologoId?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"} text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200 max-h-32 overflow-y-auto`,children:[(0,t.jsx)("option",{value:"",children:"Seleccionar odont\xf3logo"}),o.map(e=>(0,t.jsxs)("option",{value:e._id,children:[e.nombre," ",e.apellido," - ",e.especialidad]},e._id))]}),e&&(0,t.jsx)("p",{className:"mt-1 text-xs text-[hsl(var(--muted-foreground))]",children:"El odont\xf3logo no se puede modificar en edici\xf3n"}),c.odontologoId&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:c.odontologoId})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"fecha",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Fecha ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"date",id:"fecha",name:"fecha",required:!0,min:e?void 0:l,value:n.fecha,onChange:N,className:`w-full px-3 py-2 border ${c.fecha?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"} text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200`}),c.fecha&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:c.fecha})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"hora",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Hora ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"time",id:"hora",name:"hora",required:!0,value:n.hora,onChange:N,className:`w-full px-3 py-2 border ${c.hora?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"} text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200`}),c.hora&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:c.hora})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{htmlFor:"motivo",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Motivo ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{id:"motivo",name:"motivo",required:!0,rows:3,value:n.motivo,onChange:N,className:`w-full px-3 py-2 border ${c.motivo?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"} text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200`,placeholder:"Describe el motivo de la cita..."}),c.motivo&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:c.motivo})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"estado",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Estado"}),(0,t.jsxs)("select",{id:"estado",name:"estado",required:!0,value:n.estado,onChange:N,className:"w-full px-3 py-2 border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,t.jsx)("option",{value:"pendiente",children:"Pendiente"}),(0,t.jsx)("option",{value:"completada",children:"Completada"}),(0,t.jsx)("option",{value:"cancelada",children:"Cancelada"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-[hsl(var(--border))] mt-6",children:[(0,t.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:a,className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] flex items-center transition-colors duration-200",disabled:m,children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),(0,t.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500 flex items-center transition-colors duration-200",disabled:m,children:[(0,t.jsx)(j.A,{className:"h-4 w-4 mr-2"}),m?"Guardando...":"Guardar"]})]})]})]})]})};var N=a(64),w=a(4994);function k(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}let A=()=>{let{token:e}=(0,d.A)(),[r,a]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[g,b]=(0,s.useState)([]),[f,j]=(0,s.useState)(!0),[A,I]=(0,s.useState)(!1),[E,C]=(0,s.useState)(null),[S,P]=(0,s.useState)(""),[D,T]=(0,s.useState)("list"),[O,L]=(0,s.useState)(1),[$,M]=(0,s.useState)(1),[_,R]=(0,s.useState)(!1),[q,F]=(0,s.useState)({dentist:"Todos",date:"",status:"Todos"}),[H,G]=(0,s.useState)(!1),[z,V]=(0,s.useState)(!1),[W,B]=(0,s.useState)(null),[K,Q]=(0,s.useState)(!1),X=e?(0,v.Zi)(e):null,Z=e?(0,v.rQ)(e):null,J=e?(0,v.rn)(e):null;(0,s.useEffect)(()=>{e&&U()},[e]);let U=async()=>{if(X&&Z&&J)try{j(!0);let[e,r,t]=await Promise.all([X.getAppointments(1,10),Z.getDentists(1,100),J.getPatients(1,1e3)]);e?.data&&Array.isArray(e.data)?(a(e.data),M(e.pagination?.totalPages||1)):(a([]),M(1)),r?.data&&Array.isArray(r.data)?l(r.data):l([]),t?.data&&Array.isArray(t.data)?b(t.data):b([])}catch(e){console.error("Error loading data:",e),a([]),l([]),b([]),M(1)}finally{j(!1)}};(0,s.useEffect)(()=>{e&&X&&Y(O)},[O,e]);let Y=async e=>{if(X)try{let r=await X.getAppointments(e,10);r?.data&&Array.isArray(r.data)?(a(r.data),M(r.pagination?.totalPages||1)):(a([]),M(1))}catch(e){console.error("Error loading appointments:",e),a([]),M(1)}},ee=e=>{C(e),I(!0),T("edit")},er=e=>{C(e),T("view")},ea=e=>{B(e),V(!0)},et=async()=>{if(W&&X){Q(!0);try{await X.deleteAppointment(W._id),await Y(O),V(!1),B(null)}catch(e){console.error("Error deleting appointment:",e)}finally{Q(!1)}}},es=()=>{K||(V(!1),B(null))},eo=async e=>{if(X)try{E?await X.updateAppointment(E._id,e):await X.createAppointment(e),await Y(O),I(!1),T("list")}catch(e){throw e}},ed=e=>{let{name:r,value:a}=e.target;F(e=>({...e,[r]:a}))},el=e=>e?e.pacienteId?`${e.pacienteId.nombre} ${e.pacienteId.apellido}`:e.pacienteTemporalId?`${e.pacienteTemporalId.nombre} ${e.pacienteTemporalId.apellido} (Temporal)`:"Paciente desconocido":"Paciente desconocido",en=e=>e&&e.odontologoId?`${e.odontologoId.nombre} ${e.odontologoId.apellido}`:"Odont\xf3logo desconocido",ei=e=>{switch(e){case"pendiente":return"Pendiente";case"completada":return"Completada";case"cancelada":return"Cancelada";default:return e}},ec=e=>{switch(e){case"pendiente":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"completada":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"cancelada":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},eh=(0,s.useMemo)(()=>{if(!Array.isArray(r))return[];let e=k(S);return r.filter(r=>{if(!r||!r._id)return!1;let a=r.pacienteId?`${r.pacienteId.nombre||""} ${r.pacienteId.apellido||""}`:r.pacienteTemporalId?`${r.pacienteTemporalId.nombre||""} ${r.pacienteTemporalId.apellido||""}`:"",t=r.odontologoId?`${r.odontologoId.nombre||""} ${r.odontologoId.apellido||""}`:"";return!!(k(a).includes(e)||k(t).includes(e)||k(r.motivo||"").includes(e))&&(!H||("Todos"===q.dentist||r.odontologoId?._id===q.dentist)&&(!q.date||!r.fecha||!!r.fecha.startsWith(q.date))&&("Todos"===q.status||r.estado===q.status.toLowerCase()))})},[r,S,q,H]),em=e=>{let[r,a,t]=e.split("T")[0].split("-");return new Date(Number.parseInt(r),Number.parseInt(a)-1,Number.parseInt(t)).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})};return f?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 animate-pulse"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-24 animate-pulse"}),(0,t.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-32 animate-pulse"})]})]}),(0,t.jsx)("div",{className:"bg-[hsl(var(--card))] rounded-lg p-6",children:(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>(0,t.jsx)("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"},e))})})]}):"view"===D&&E?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Detalles de la Cita"}),(0,t.jsx)("button",{onClick:()=>T("list"),className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] transition-colors duration-200",children:"Volver"})]}),(0,t.jsxs)("div",{className:"bg-[hsl(var(--card))] transition-colors duration-200 shadow-md rounded-lg p-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-[hsl(var(--foreground))] mb-4",children:"Informaci\xf3n de la Cita"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Paciente:"})," ",el(E)]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Odont\xf3logo:"})," ",en(E)]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Especialidad:"})," ",E.odontologoId.especialidad]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Fecha:"})," ",em(E.fecha)]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Hora:"})," ",E.hora]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Motivo:"})," ",E.motivo]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Estado:"})," ",(0,t.jsx)("span",{className:`px-2 py-1 rounded-full text-xs ${ec(E.estado)}`,children:ei(E.estado)})]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Creada el:"})," ",new Date(E.createdAt).toLocaleString("es-ES")]})]})]})}),(0,t.jsxs)("div",{className:"mt-6 flex space-x-4",children:[(0,t.jsx)("button",{onClick:()=>ee(E),className:"px-4 py-2 bg-amber-400 text-white rounded-md hover:bg-amber-500 transition-colors duration-200",children:"Editar"}),(0,t.jsx)("button",{onClick:()=>ea(E),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors duration-200",children:"Eliminar"})]})]}),(0,t.jsx)(w.A,{isOpen:z,onClose:es,onConfirm:et,title:"Eliminar Cita",message:`\xbfEst\xe1 seguro que desea eliminar la cita de ${el(W)} programada para el ${W?em(W.fecha):""}? Esta acci\xf3n no se puede deshacer.`,confirmText:"Eliminar",cancelText:"Cancelar",type:"danger",isLoading:K})]}):"edit"===D?(0,t.jsx)(y,{appointment:E,onSave:eo,onCancel:()=>{I(!1),T("list")},dentists:o,patients:g}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Gesti\xf3n de Citas"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{Y(O)},className:"flex items-center px-3 py-2 bg-[hsl(var(--card))] border border-[hsl(var(--border))] rounded-md text-sm font-medium text-[hsl(var(--foreground))] hover:bg-[hsl(var(--card-hover))] transition-colors duration-200",children:[(0,t.jsx)(n.A,{className:"h-4 w-4 mr-2 text-[hsl(var(--muted-foreground))]"}),"Actualizar"]}),(0,t.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>R(!_),className:`flex items-center px-3 py-2 border rounded-md text-sm font-medium transition-colors duration-200 ${H?"bg-white dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400":"bg-[hsl(var(--card))] border-[hsl(var(--border))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--card-hover))]"}`,children:[(0,t.jsx)(i.A,{className:`h-4 w-4 mr-2 ${H?"text-red-500 dark:text-red-400":"text-[hsl(var(--muted-foreground))]"}`}),"Filtros",H&&(0,t.jsx)("span",{className:"ml-1 bg-white dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs font-semibold px-1.5 py-0.5 rounded-full border border-red-100 dark:border-red-800",children:"Activos"})]}),(0,t.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{C(null),I(!0),T("edit")},className:"flex items-center px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500 transition-colors duration-200",children:[(0,t.jsx)(c.A,{className:"h-5 w-5 mr-1"}),"Nueva Cita"]})]})]}),_&&(0,t.jsxs)(p.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-[hsl(var(--card))] p-4 rounded-lg shadow-md transition-colors duration-200",children:[(0,t.jsx)("h3",{className:"font-medium text-[hsl(var(--foreground))] mb-3",children:"Filtros avanzados"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Odont\xf3logo"}),(0,t.jsxs)("select",{name:"dentist",value:q.dentist,onChange:ed,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,t.jsx)("option",{value:"Todos",children:"Todos"}),o.map(e=>(0,t.jsxs)("option",{value:e._id,children:[e.nombre," ",e.apellido]},e._id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Fecha"}),(0,t.jsx)("input",{type:"date",name:"date",value:q.date,onChange:ed,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Estado"}),(0,t.jsxs)("select",{name:"status",value:q.status,onChange:ed,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,t.jsx)("option",{value:"Todos",children:"Todos"}),(0,t.jsx)("option",{value:"pendiente",children:"Pendiente"}),(0,t.jsx)("option",{value:"completada",children:"Completada"}),(0,t.jsx)("option",{value:"cancelada",children:"Cancelada"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,t.jsx)("button",{onClick:()=>{F({dentist:"Todos",date:"",status:"Todos"}),G(!1)},className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] mr-2 transition-colors duration-200",children:"Limpiar"}),(0,t.jsx)("button",{onClick:()=>{G(!0),L(1)},className:"px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500 transition-colors duration-200",children:"Aplicar filtros"})]})]}),(0,t.jsxs)("div",{className:"bg-[hsl(var(--card))] transition-colors duration-200 shadow-md rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 border-b border-[hsl(var(--border))]",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(h.A,{className:"h-5 w-5 text-[hsl(var(--muted-foreground))]"})}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar citas por paciente, odont\xf3logo o motivo...",className:"pl-10 pr-4 py-2 w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",value:S,onChange:e=>{P(e.target.value),L(1)}})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-[hsl(var(--border))]",children:[(0,t.jsx)("thead",{className:"bg-[hsl(var(--secondary))]",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Paciente"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Fecha"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Hora"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Odont\xf3logo"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Motivo"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Estado"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Acciones"})]})}),(0,t.jsx)("tbody",{className:"bg-[hsl(var(--card))] divide-y divide-[hsl(var(--border))] transition-colors duration-200",children:Array.isArray(eh)&&eh.map(e=>e&&e._id?(0,t.jsxs)("tr",{className:"hover:bg-[hsl(var(--card-hover))] transition-colors duration-200",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-[hsl(var(--foreground))]",children:el(e)})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:e.fecha?em(e.fecha):"Fecha no disponible"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:e.hora||"Hora no disponible"})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:en(e)}),(0,t.jsx)("div",{className:"text-xs text-[hsl(var(--muted-foreground))]",children:e.odontologoId?.especialidad||"Especialidad no disponible"})]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:e.motivo||"Sin motivo especificado"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${ec(e.estado||"pendiente")}`,children:ei(e.estado||"pendiente")})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,t.jsx)("button",{onClick:()=>er(e),className:"text-[hsl(var(--muted-foreground))] hover:text-[hsl(var(--foreground))] mr-3 transition-colors duration-200",title:"Ver detalles",children:(0,t.jsx)(m.A,{className:"h-5 w-5"})}),(0,t.jsx)("button",{onClick:()=>ee(e),className:"text-amber-500 hover:text-amber-600 mr-3 transition-colors duration-200",title:"Editar",children:(0,t.jsx)(u.A,{className:"h-5 w-5"})}),(0,t.jsx)("button",{onClick:()=>ea(e),className:"text-red-500 hover:text-red-600 transition-colors duration-200",title:"Eliminar",children:(0,t.jsx)(x.A,{className:"h-5 w-5"})})]})]},e._id):null).filter(Boolean)})]})}),0===eh.length?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsxs)(p.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center",children:[(0,t.jsx)(h.A,{className:"h-12 w-12 text-[hsl(var(--muted-foreground))] mb-3"}),(0,t.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] text-lg",children:"No se encontraron citas"}),(0,t.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] text-sm mt-1",children:"Intenta con otra b\xfasqueda o agrega una nueva cita"})]})}):(0,t.jsx)(N.A,{currentPage:O,totalPages:$,onPageChange:L})]}),(0,t.jsx)(w.A,{isOpen:z,onClose:es,onConfirm:et,title:"Eliminar Cita",message:`\xbfEst\xe1 seguro que desea eliminar la cita de ${W?el(W):""} programada para el ${W?em(W.fecha):""}? Esta acci\xf3n no se puede deshacer.`,confirmText:"Eliminar",cancelText:"Cancelar",type:"danger",isLoading:K})]})};function I(){(0,o.useRouter)();let{isAuthenticated:e}=(0,d.A)(),[r,a]=(0,s.useState)(!1);return r?r&&!e?null:(0,t.jsx)(l.A,{children:(0,t.jsx)(A,{})}):(0,t.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Cargando..."})})}},6474:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2688).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7033:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2688).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7671:(e,r,a)=>{Promise.resolve().then(a.bind(a,4159))},8122:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2688).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8233:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2688).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8492:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2688).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8559:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2688).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8819:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2688).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9270:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(2688).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9519:(e,r,a)=>{Promise.resolve().then(a.bind(a,6354))}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[357,625,24,77],()=>a(5219));module.exports=t})();