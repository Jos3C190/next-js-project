(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[912],{1666:(e,r,a)=>{"use strict";a.d(r,{A:()=>l});var s=a(5155),t=a(2355),o=a(3052),i=a(6408);let l=e=>{let{currentPage:r,totalPages:a,onPageChange:l}=e;if(a<=1)return null;let n=e=>{e>=1&&e<=a&&e!==r&&l(e)};return(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 border-t border-[hsl(var(--border))]",children:[(0,s.jsxs)("div",{className:"flex flex-1 justify-between sm:hidden",children:[(0,s.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(r-1),disabled:1===r,className:"relative inline-flex items-center rounded-md px-4 py-2 text-sm font-medium transition-colors duration-200 ".concat(1===r?"bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))] cursor-not-allowed":"bg-[hsl(var(--card))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Previous page",children:"Anterior"}),(0,s.jsxs)("span",{className:"text-sm text-[hsl(var(--foreground))]",children:["P\xe1gina ",r," de ",a]}),(0,s.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(r+1),disabled:r===a,className:"relative ml-3 inline-flex items-center rounded-md px-4 py-2 text-sm font-medium transition-colors duration-200 ".concat(r===a?"bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))] cursor-not-allowed":"bg-[hsl(var(--card))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Next page",children:"Siguiente"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-[hsl(var(--foreground))]",children:["Mostrando p\xe1gina ",(0,s.jsx)("span",{className:"font-medium",children:r})," de"," ",(0,s.jsx)("span",{className:"font-medium",children:a})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[(0,s.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n(r-1),disabled:1===r,className:"relative inline-flex items-center rounded-l-md px-2 py-2 transition-colors duration-200 ".concat(1===r?"cursor-not-allowed bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))]":"text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Previous page",children:(0,s.jsx)(t.A,{className:"h-5 w-5","aria-hidden":"true"})}),(()=>{let e=[];if(a<=5)for(let r=1;r<=a;r++)e.push(r);else{e.push(1);let s=Math.max(2,r-1),t=Math.min(a-1,r+1);r<=2&&(t=4),r>=a-1&&(s=a-3),s>2&&e.push(-1);for(let r=s;r<=t;r++)e.push(r);t<a-1&&e.push(-2),e.push(a)}return e})().map((e,a)=>e<0?(0,s.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-[hsl(var(--foreground))] border border-[hsl(var(--border))]",children:"..."},"ellipsis-".concat(a)):(0,s.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n(e),className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold transition-colors duration-200 ".concat(e===r?"bg-red-400 text-white border border-red-400 focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-400":"text-[hsl(var(--foreground))] border border-[hsl(var(--border))] hover:bg-[hsl(var(--secondary))] focus:z-20 focus:outline-offset-0"),"aria-current":e===r?"page":void 0,children:e},e)),(0,s.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n(r+1),disabled:r===a,className:"relative inline-flex items-center rounded-r-md px-2 py-2 transition-colors duration-200 ".concat(r===a?"cursor-not-allowed bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))]":"text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Next page",children:(0,s.jsx)(o.A,{className:"h-5 w-5","aria-hidden":"true"})})]})})]})]})}},2088:(e,r,a)=>{"use strict";a.d(r,{A:()=>d});var s=a(5155),t=a(760),o=a(6408),i=a(4416),l=a(1243),n=a(1154);let d=e=>{let{isOpen:r,onClose:a,onConfirm:d,title:c,message:m,confirmText:h="Confirmar",cancelText:x="Cancelar",type:u="danger",isLoading:b=!1}=e,f=(()=>{switch(u){case"danger":default:return{icon:"text-red-500",confirmButton:"bg-red-500 hover:bg-red-600 focus:ring-red-500",iconBg:"bg-red-100 dark:bg-red-900/20"};case"warning":return{icon:"text-amber-500",confirmButton:"bg-amber-500 hover:bg-amber-600 focus:ring-amber-500",iconBg:"bg-amber-100 dark:bg-amber-900/20"};case"info":return{icon:"text-blue-500",confirmButton:"bg-blue-500 hover:bg-blue-600 focus:ring-blue-500",iconBg:"bg-blue-100 dark:bg-blue-900/20"}}})();return(0,s.jsx)(t.N,{children:r&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[(0,s.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:b?void 0:a}),(0,s.jsxs)(o.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"relative transform overflow-hidden rounded-lg bg-[hsl(var(--card))] px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,s.jsx)("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block",children:!b&&(0,s.jsxs)("button",{type:"button",className:"rounded-md bg-[hsl(var(--card))] text-[hsl(var(--muted-foreground))] hover:text-[hsl(var(--foreground))] focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",onClick:a,children:[(0,s.jsx)("span",{className:"sr-only",children:"Cerrar"}),(0,s.jsx)(i.A,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,s.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,s.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full ".concat(f.iconBg," sm:mx-0 sm:h-10 sm:w-10"),children:(0,s.jsx)(l.A,{className:"h-6 w-6 ".concat(f.icon),"aria-hidden":"true"})}),(0,s.jsxs)("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[(0,s.jsx)("h3",{className:"text-base font-semibold leading-6 text-[hsl(var(--foreground))]",children:c}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("p",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:m})})]})]}),(0,s.jsxs)("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[(0,s.jsx)("button",{type:"button",className:"inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm sm:ml-3 sm:w-auto focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200 ".concat(f.confirmButton," ").concat(b?"opacity-50 cursor-not-allowed":""),onClick:d,disabled:b,children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Procesando..."]}):h}),(0,s.jsx)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-[hsl(var(--secondary))] px-3 py-2 text-sm font-semibold text-[hsl(var(--secondary-foreground))] shadow-sm ring-1 ring-inset ring-[hsl(var(--border))] hover:bg-[hsl(var(--card-hover))] sm:mt-0 sm:w-auto transition-colors duration-200 ".concat(b?"opacity-50 cursor-not-allowed":""),onClick:a,disabled:b,children:x})]})]})]})})})}},2293:(e,r,a)=>{Promise.resolve().then(a.bind(a,7565))},3904:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7565:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>P});var s=a(5155),t=a(2115),o=a(5695),i=a(5731),l=a(9032),n=a(3904),d=a(2355),c=a(3717),m=a(2525),h=a(1482),x=a(4616),u=a(7924),b=a(2657),f=a(6408),p=a(7550),g=a(4416),v=a(4229);let j=e=>{let{patient:r,onSave:a,onCancel:o}=e,[i,l]=(0,t.useState)({nombre:"",apellido:"",correo:"",telefono:"",direccion:"",fecha_nacimiento:"",historia_clinica:"",password:""}),[n,d]=(0,t.useState)({}),[c,m]=(0,t.useState)(!1);(0,t.useEffect)(()=>{r&&l({nombre:r.nombre||"",apellido:r.apellido||"",correo:r.correo||"",telefono:r.telefono||"",direccion:r.direccion||"",fecha_nacimiento:r.fecha_nacimiento?r.fecha_nacimiento.split("T")[0]:"",historia_clinica:r.historia_clinica||"",password:""})},[r]);let h=()=>{let e={};if(i.nombre.trim()?i.nombre.trim().length<2&&(e.nombre="El nombre debe tener al menos 2 caracteres"):e.nombre="El nombre es obligatorio",i.apellido.trim()?i.apellido.trim().length<2&&(e.apellido="El apellido debe tener al menos 2 caracteres"):e.apellido="El apellido es obligatorio",i.telefono.trim()?i.telefono.trim().length<8&&(e.telefono="El tel\xe9fono debe tener al menos 8 d\xedgitos"):e.telefono="El tel\xe9fono es obligatorio",i.correo.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.correo)||(e.correo="El correo no es v\xe1lido"):e.correo="El correo es obligatorio",i.direccion.trim()?i.direccion.trim().length<5&&(e.direccion="La direcci\xf3n debe tener al menos 5 caracteres"):e.direccion="La direcci\xf3n es obligatoria",i.fecha_nacimiento){let r=new Date(i.fecha_nacimiento),a=new Date,s=a.getFullYear()-r.getFullYear();isNaN(r.getTime())?e.fecha_nacimiento="Fecha de nacimiento inv\xe1lida":r>a?e.fecha_nacimiento="La fecha de nacimiento no puede ser futura":s>120&&(e.fecha_nacimiento="La fecha de nacimiento no es realista")}else e.fecha_nacimiento="La fecha de nacimiento es obligatoria";return r||i.password?!r&&i.password&&i.password.length<6&&(e.password="La contrase\xf1a debe tener al menos 6 caracteres"):e.password="La contrase\xf1a es obligatoria para nuevos pacientes",d(e),0===Object.keys(e).length},x=e=>{let{name:r,value:a}=e.target;l({...i,[r]:a}),n[r]&&d({...n,[r]:""})},u=async e=>{if(e.preventDefault(),h()){m(!0);try{let e={...i};if(r&&!e.password&&delete e.password,Object.keys(e).forEach(r=>{let a=e[r];"string"==typeof a&&(e[r]=a.trim())}),e.fecha_nacimiento){let r=new Date(e.fecha_nacimiento+"T00:00:00.000Z");if(isNaN(r.getTime()))throw Error("Fecha de nacimiento inv\xe1lida")}for(let r of["nombre","apellido","correo","telefono","direccion"]){let a=e[r];if(!a||"string"==typeof a&&""===a.trim())throw Error("El campo ".concat(r," es requerido"))}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.correo))throw Error("El formato del correo electr\xf3nico no es v\xe1lido");await a(e)}catch(e){console.error("Error al guardar:",e),e instanceof Error?alert("Error: ".concat(e.message)):alert("Error desconocido al guardar el paciente")}finally{m(!1)}}};return(0,s.jsxs)(f.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:r?"Editar Paciente":"Nuevo Paciente"}),(0,s.jsxs)(f.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(p.A,{className:"h-5 w-5 mr-1"}),"Volver"]})]}),(0,s.jsx)("div",{className:"bg-[hsl(var(--card))] shadow-md rounded-lg p-6 transition-colors duration-200",children:(0,s.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"nombre",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Nombre ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"nombre",name:"nombre",required:!0,value:i.nombre,onChange:x,className:"w-full px-3 py-2 border ".concat(n.nombre?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"," rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.nombre&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.nombre})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"apellido",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Apellido ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"apellido",name:"apellido",required:!0,value:i.apellido,onChange:x,className:"w-full px-3 py-2 border ".concat(n.apellido?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"," rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.apellido&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.apellido})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"correo",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Correo ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"email",id:"correo",name:"correo",required:!0,value:i.correo,onChange:x,className:"w-full px-3 py-2 border ".concat(n.correo?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"," rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.correo&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.correo})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"telefono",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Tel\xe9fono ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"tel",id:"telefono",name:"telefono",required:!0,value:i.telefono,onChange:x,className:"w-full px-3 py-2 border ".concat(n.telefono?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"," rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.telefono&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.telefono})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"fecha_nacimiento",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Fecha de Nacimiento ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"date",id:"fecha_nacimiento",name:"fecha_nacimiento",required:!0,value:i.fecha_nacimiento,onChange:x,className:"w-full px-3 py-2 border ".concat(n.fecha_nacimiento?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"," rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.fecha_nacimiento&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.fecha_nacimiento})]}),!r&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"password",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Contrase\xf1a ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"password",id:"password",name:"password",required:!r,value:i.password||"",onChange:x,className:"w-full px-3 py-2 border ".concat(n.password?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"," rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.password&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.password}),r&&(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Dejar en blanco para mantener la contrase\xf1a actual"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("label",{htmlFor:"direccion",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Direcci\xf3n ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("textarea",{id:"direccion",name:"direccion",rows:2,required:!0,value:i.direccion,onChange:x,className:"w-full px-3 py-2 border ".concat(n.direccion?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))]"," rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.direccion&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.direccion})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("label",{htmlFor:"historia_clinica",className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:["Historia Cl\xednica ",(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:"(Opcional)"})]}),(0,s.jsx)("textarea",{id:"historia_clinica",name:"historia_clinica",rows:4,value:i.historia_clinica,onChange:x,className:"w-full px-3 py-2 border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t mt-6",children:[(0,s.jsxs)(f.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:o,className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] flex items-center transition-colors duration-200",disabled:c,children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),(0,s.jsxs)(f.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500 flex items-center",disabled:c,children:[(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2"}),c?"Guardando...":"Guardar"]})]})]})})]})};var N=a(1666),y=a(2088),w=a(1886);function k(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}let C=()=>{let{isAuthenticated:e,isHydrated:r,token:a}=(0,i.A)(),[o,l]=(0,t.useState)([]),[p,g]=(0,t.useState)(!1),[v,C]=(0,t.useState)(null),[P,E]=(0,t.useState)(""),[_,T]=(0,t.useState)("list"),[A,S]=(0,t.useState)(1),[H,F]=(0,t.useState)(!1),[D,L]=(0,t.useState)(!0),[q,M]=(0,t.useState)(!1),[B,z]=(0,t.useState)(1),[O,V]=(0,t.useState)(0),[G,Y]=(0,t.useState)(null),[R,I]=(0,t.useState)(!1),[$,Z]=(0,t.useState)(null),[J,K]=(0,t.useState)(!1),[Q,U]=(0,t.useState)({age:"Todos",lastVisit:"Cualquier fecha",status:"Todos",historiaClinica:"Todos"}),[W,X]=(0,t.useState)(!1),ee=a?(0,w.rn)(a):null,er=async function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!a||!ee){L(!1);return}try{s?M(!0):L(!0),Y(null);let e=await ee.getPatients(r,10);l(e.data),z(e.pagination.totalPages),V(e.pagination.total),S(r)}catch(e){console.error("Error cargando pacientes:",e),Y("Error al cargar los pacientes")}finally{L(!1),M(!1)}};(0,t.useEffect)(()=>{r&&(e&&a?er(1):L(!1))},[r,e,a]);let ea=e=>{C(e),g(!0),T("edit")},es=e=>{C(e),T("view")},et=e=>{Z(e),I(!0)},eo=async()=>{if(ee&&$){K(!0);try{await ee.deletePatient($._id),await er(A),I(!1),Z(null)}catch(e){console.error("Error eliminando paciente:",e),alert("Error al eliminar el paciente")}finally{K(!1)}}},ei=()=>{J||(I(!1),Z(null))},el=async e=>{if(ee)try{v?await ee.updatePatient(v._id,e):await ee.createPatient(e),await er(A),g(!1),T("list")}catch(e){throw console.error("Error guardando paciente:",e),e}},en=()=>{er(A,!0)},ed=(0,t.useMemo)(()=>{let e=k(P);return o.filter(r=>{if(!(k("".concat(r.nombre," ").concat(r.apellido)).includes(e)||k(r.correo).includes(e)||k(r.telefono).includes(e)))return!1;if(!W)return!0;if("Todos"!==Q.age){let e=new Date(r.fecha_nacimiento),a=new Date,s=a.getFullYear()-e.getFullYear(),t=a.getMonth()>e.getMonth()||a.getMonth()===e.getMonth()&&a.getDate()>=e.getDate()?s:s-1;if("18-30 a\xf1os"===Q.age&&(t<18||t>30)||"31-50 a\xf1os"===Q.age&&(t<31||t>50)||"51+ a\xf1os"===Q.age&&t<51)return!1}return"Todos"===Q.historiaClinica||("Con historia"!==Q.historiaClinica||!!r.historia_clinica)&&("Sin historia"!==Q.historiaClinica||!r.historia_clinica)})},[o,P,Q,W]),ec=e=>{let{name:r,value:a}=e.target;U(e=>({...e,[r]:a}))},em={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return!r||D?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-40 animate-pulse"})]}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6",children:(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,s.jsx)("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"},r))})}),(0,s.jsxs)("div",{className:"text-center text-sm text-gray-500",children:["Estado: ",r?"Cargando pacientes...":"Hidratando..."]})]}):G?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Gesti\xf3n de Pacientes"}),(0,s.jsxs)("button",{onClick:en,className:"flex items-center px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Reintentar"]})]}),(0,s.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:(0,s.jsx)("p",{className:"text-red-600 dark:text-red-400",children:G})})]}):e?"view"===_&&v?(0,s.jsxs)(f.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Detalles del Paciente"}),(0,s.jsxs)(f.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>T("list"),className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] flex items-center transition-colors duration-200",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-1"}),"Volver"]})]}),(0,s.jsxs)(f.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3},className:"bg-[hsl(var(--card))] transition-colors duration-200 shadow-md rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-[hsl(var(--foreground))] mb-4 pb-2 border-b border-[hsl(var(--border))]",children:"Informaci\xf3n Personal"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Nombre:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:"".concat(v.nombre," ").concat(v.apellido)})]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Correo:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:v.correo})]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Tel\xe9fono:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:v.telefono})]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Fecha de Nacimiento:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:new Date(v.fecha_nacimiento).toLocaleDateString("es-ES")})]}),(0,s.jsxs)("p",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Direcci\xf3n:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:v.direccion})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-[hsl(var(--foreground))] mb-4 pb-2 border-b border-[hsl(var(--border))]",children:"Historia Cl\xednica"}),(0,s.jsx)("div",{className:"bg-[hsl(var(--secondary))] transition-colors duration-200 p-4 rounded-md min-h-48",children:v.historia_clinica?(0,s.jsx)("p",{className:"text-[hsl(var(--foreground))]",children:v.historia_clinica}):(0,s.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] italic",children:"No hay historia cl\xednica disponible."})})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex space-x-4 justify-end",children:[(0,s.jsxs)(f.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ea(v),className:"px-4 py-2 bg-amber-400 text-white rounded-md hover:bg-amber-500 flex items-center",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Editar"]}),(0,s.jsxs)(f.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>et(v),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 flex items-center",children:[(0,s.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]})]}),(0,s.jsx)(y.A,{isOpen:R,onClose:ei,onConfirm:eo,title:"Eliminar Paciente",message:"\xbfEst\xe1 seguro que desea eliminar al paciente ".concat(null==$?void 0:$.nombre," ").concat(null==$?void 0:$.apellido,"? Esta acci\xf3n no se puede deshacer."),confirmText:"Eliminar",cancelText:"Cancelar",type:"danger",isLoading:J})]}):"edit"===_?(0,s.jsx)(j,{patient:v,onSave:el,onCancel:()=>{g(!1),T("list")}}):(0,s.jsxs)(f.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Gesti\xf3n de Pacientes"}),(0,s.jsxs)("p",{className:"text-sm text-[hsl(var(--muted-foreground))] mt-1",children:["Total: ",O," pacientes"]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)(f.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:en,disabled:q,className:"flex items-center px-3 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] transition-colors duration-200 disabled:opacity-50",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-2 ".concat(q?"animate-spin":"")}),q?"Actualizando...":"Actualizar"]}),(0,s.jsxs)(f.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>F(!H),className:"flex items-center px-3 py-2 border rounded-md text-sm font-medium transition-colors duration-200 ".concat(W?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-800 text-red-700 dark:text-red-400":"bg-[hsl(var(--card))] border-[hsl(var(--border))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--card-hover))]"),children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2 ".concat(W?"text-red-500 dark:text-red-400":"text-[hsl(var(--muted-foreground))]")}),"Filtros",W&&(0,s.jsx)("span",{className:"ml-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 text-xs font-semibold px-1.5 py-0.5 rounded-full",children:"Activos"})]}),(0,s.jsxs)(f.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{C(null),g(!0),T("edit")},className:"flex items-center px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500",children:[(0,s.jsx)(x.A,{className:"h-5 w-5 mr-1"}),"Nuevo Paciente"]})]})]}),H&&(0,s.jsxs)(f.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-[hsl(var(--card))] p-4 rounded-lg shadow-md transition-colors duration-200",children:[(0,s.jsx)("h3",{className:"font-medium text-[hsl(var(--foreground))] mb-3",children:"Filtros avanzados"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Edad"}),(0,s.jsxs)("select",{name:"age",value:Q.age,onChange:ec,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,s.jsx)("option",{children:"Todos"}),(0,s.jsx)("option",{children:"18-30 a\xf1os"}),(0,s.jsx)("option",{children:"31-50 a\xf1os"}),(0,s.jsx)("option",{children:"51+ a\xf1os"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Historia Cl\xednica"}),(0,s.jsxs)("select",{name:"historiaClinica",value:Q.historiaClinica,onChange:ec,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,s.jsx)("option",{children:"Todos"}),(0,s.jsx)("option",{children:"Con historia"}),(0,s.jsx)("option",{children:"Sin historia"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,s.jsx)("button",{onClick:()=>{U({age:"Todos",lastVisit:"Cualquier fecha",status:"Todos",historiaClinica:"Todos"}),X(!1)},className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] mr-2 transition-colors duration-200",children:"Limpiar"}),(0,s.jsx)("button",{onClick:()=>{X(!0)},className:"px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500 transition-colors duration-200",children:"Aplicar filtros"})]})]}),(0,s.jsxs)("div",{className:"bg-[hsl(var(--card))] transition-colors duration-200 shadow-md rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-[hsl(var(--border))]",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(u.A,{className:"h-5 w-5 text-[hsl(var(--muted-foreground))]"})}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar pacientes por nombre, correo o tel\xe9fono...",className:"pl-10 pr-4 py-2 w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",value:P,onChange:e=>{E(e.target.value)}})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(f.P.table,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},initial:"hidden",animate:"visible",className:"min-w-full divide-y divide-[hsl(var(--border))]",children:[(0,s.jsx)("thead",{className:"bg-[hsl(var(--secondary))]",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Nombre"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Correo"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Tel\xe9fono"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Fecha de Nacimiento"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-[hsl(var(--card))] transition-colors duration-200 divide-y divide-[hsl(var(--border))]",children:ed.map(e=>(0,s.jsxs)(f.P.tr,{variants:em,className:"hover:bg-[hsl(var(--card-hover))] transition-colors duration-150",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-[hsl(var(--foreground))]",children:"".concat(e.nombre," ").concat(e.apellido)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:e.correo})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:e.telefono})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:new Date(e.fecha_nacimiento).toLocaleDateString("es-ES")})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(f.P.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>es(e),className:"text-[hsl(var(--muted-foreground))] hover:text-[hsl(var(--foreground))] p-1 rounded-full hover:bg-[hsl(var(--secondary))] transition-colors duration-200",title:"Ver detalles",children:(0,s.jsx)(b.A,{className:"h-5 w-5"})}),(0,s.jsx)(f.P.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>ea(e),className:"text-amber-500 hover:text-amber-600 p-1 rounded-full hover:bg-amber-50 dark:hover:bg-amber-900/20",title:"Editar",children:(0,s.jsx)(c.A,{className:"h-5 w-5"})}),(0,s.jsx)(f.P.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>et(e),className:"text-red-500 hover:text-red-600 p-1 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20",title:"Eliminar",children:(0,s.jsx)(m.A,{className:"h-5 w-5"})})]})})]},e._id))})]})}),0===ed.length?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsxs)(f.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 text-[hsl(var(--muted-foreground))] mb-3"}),(0,s.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] text-lg",children:"No se encontraron pacientes"}),(0,s.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] text-sm mt-1",children:"Intenta con otra b\xfasqueda o agrega un nuevo paciente"})]})}):(0,s.jsx)(N.A,{currentPage:A,totalPages:B,onPageChange:e=>{er(e)}})]}),(0,s.jsx)(y.A,{isOpen:R,onClose:ei,onConfirm:eo,title:"Eliminar Paciente",message:"\xbfEst\xe1 seguro que desea eliminar al paciente ".concat(null==$?void 0:$.nombre," ").concat(null==$?void 0:$.apellido,"? Esta acci\xf3n no se puede deshacer."),confirmText:"Eliminar",cancelText:"Cancelar",type:"danger",isLoading:J})]}):(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-6 text-center",children:(0,s.jsx)("p",{className:"text-amber-600 dark:text-amber-400",children:"Debes iniciar sesi\xf3n para ver los pacientes"})})})};function P(){let e=(0,o.useRouter)(),{isAuthenticated:r}=(0,i.A)(),[a,n]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{n(!0),a&&!r&&e.push("/")},[r,e,a]),a)?a&&!r?null:(0,s.jsx)(l.A,{children:(0,s.jsx)(C,{})}):(0,s.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Cargando..."})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[766,725,522,32,441,684,358],()=>r(2293)),_N_E=e.O()}]);