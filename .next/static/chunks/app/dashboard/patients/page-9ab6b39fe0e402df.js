(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[912],{1482:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},1666:(e,r,a)=>{"use strict";a.d(r,{A:()=>l});var s=a(5155),o=a(2355),t=a(3052),i=a(6408);let l=e=>{let{currentPage:r,totalPages:a,onPageChange:l}=e;if(a<=1)return null;let n=e=>{e>=1&&e<=a&&e!==r&&l(e)};return(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 border-t border-[hsl(var(--border))]",children:[(0,s.jsxs)("div",{className:"flex flex-1 justify-between sm:hidden",children:[(0,s.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(r-1),disabled:1===r,className:"relative inline-flex items-center rounded-md px-4 py-2 text-sm font-medium transition-colors duration-200 ".concat(1===r?"bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))] cursor-not-allowed":"bg-[hsl(var(--card))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Previous page",children:"Anterior"}),(0,s.jsxs)("span",{className:"text-sm text-[hsl(var(--foreground))]",children:["P\xe1gina ",r," de ",a]}),(0,s.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(r+1),disabled:r===a,className:"relative ml-3 inline-flex items-center rounded-md px-4 py-2 text-sm font-medium transition-colors duration-200 ".concat(r===a?"bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))] cursor-not-allowed":"bg-[hsl(var(--card))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Next page",children:"Siguiente"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-[hsl(var(--foreground))]",children:["Mostrando p\xe1gina ",(0,s.jsx)("span",{className:"font-medium",children:r})," de"," ",(0,s.jsx)("span",{className:"font-medium",children:a})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[(0,s.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n(r-1),disabled:1===r,className:"relative inline-flex items-center rounded-l-md px-2 py-2 transition-colors duration-200 ".concat(1===r?"cursor-not-allowed bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))]":"text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Previous page",children:(0,s.jsx)(o.A,{className:"h-5 w-5","aria-hidden":"true"})}),(()=>{let e=[];if(a<=5)for(let r=1;r<=a;r++)e.push(r);else{e.push(1);let s=Math.max(2,r-1),o=Math.min(a-1,r+1);r<=2&&(o=4),r>=a-1&&(s=a-3),s>2&&e.push(-1);for(let r=s;r<=o;r++)e.push(r);o<a-1&&e.push(-2),e.push(a)}return e})().map((e,a)=>e<0?(0,s.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-[hsl(var(--foreground))] border border-[hsl(var(--border))]",children:"..."},"ellipsis-".concat(a)):(0,s.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n(e),className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold transition-colors duration-200 ".concat(e===r?"bg-red-400 text-white border border-red-400 focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-400":"text-[hsl(var(--foreground))] border border-[hsl(var(--border))] hover:bg-[hsl(var(--secondary))] focus:z-20 focus:outline-offset-0"),"aria-current":e===r?"page":void 0,children:e},e)),(0,s.jsx)(i.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n(r+1),disabled:r===a,className:"relative inline-flex items-center rounded-r-md px-2 py-2 transition-colors duration-200 ".concat(r===a?"cursor-not-allowed bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))]":"text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Next page",children:(0,s.jsx)(t.A,{className:"h-5 w-5","aria-hidden":"true"})})]})})]})]})}},2293:(e,r,a)=>{Promise.resolve().then(a.bind(a,7565))},2355:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},2525:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2657:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3717:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4229:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4616:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7550:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7565:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>k});var s=a(5155),o=a(2115),t=a(5695),i=a(5731),l=a(9032),n=a(2355),d=a(3717),c=a(2525),m=a(1482),h=a(4616),x=a(7924),u=a(2657),p=a(6408),f=a(7550),b=a(4416),g=a(4229);let v=e=>{let{patient:r,onSave:a,onCancel:t}=e,[i,l]=(0,o.useState)({nombre:"",apellido:"",correo:"",telefono:"",direccion:"",fecha_nacimiento:"",historia_clinica:"",password:""}),[n,d]=(0,o.useState)({}),[c,m]=(0,o.useState)(!1);(0,o.useEffect)(()=>{r&&l({nombre:r.nombre||"",apellido:r.apellido||"",correo:r.correo||"",telefono:r.telefono||"",direccion:r.direccion||"",fecha_nacimiento:r.fecha_nacimiento||"",historia_clinica:r.historia_clinica||"",password:""})},[r]);let h=()=>{let e={};return i.nombre.trim()||(e.nombre="El nombre es obligatorio"),i.apellido.trim()||(e.apellido="El apellido es obligatorio"),i.telefono.trim()?/^\d{4}-\d{4}$/.test(i.telefono)||(e.telefono="El formato debe ser XXXX-XXXX"):e.telefono="El tel\xe9fono es obligatorio",i.correo.trim()?/\S+@\S+\.\S+/.test(i.correo)||(e.correo="El correo no es v\xe1lido"):e.correo="El correo es obligatorio",i.direccion.trim()||(e.direccion="La direcci\xf3n es obligatoria"),i.fecha_nacimiento||(e.fecha_nacimiento="La fecha de nacimiento es obligatoria"),r||i.password||(e.password="La contrase\xf1a es obligatoria para nuevos pacientes"),d(e),0===Object.keys(e).length},x=e=>{let{name:r,value:a}=e.target;if("telefono"===r){let e=a.replace(/\D/g,"");e.length<=4?l({...i,[r]:e}):l({...i,[r]:"".concat(e.slice(0,4),"-").concat(e.slice(4,8))})}else l({...i,[r]:a});n[r]&&d({...n,[r]:""})},u=async e=>{if(e.preventDefault(),h()){m(!0);try{await new Promise(e=>setTimeout(e,800));let e={...i};r&&!e.password&&delete e.password,a(e)}catch(e){console.error("Error al guardar:",e)}finally{m(!1)}}};return(0,s.jsxs)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:r?"Editar Paciente":"Nuevo Paciente"}),(0,s.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(f.A,{className:"h-5 w-5 mr-1"}),"Volver"]})]}),(0,s.jsx)("div",{className:"bg-white shadow-md rounded-lg p-6",children:(0,s.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nombre ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"nombre",name:"nombre",required:!0,value:i.nombre,onChange:x,className:"w-full px-3 py-2 border ".concat(n.nombre?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"," text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.nombre&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.nombre})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"apellido",className:"block text-sm font-medium text-gray-700 mb-1",children:["Apellido ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"apellido",name:"apellido",required:!0,value:i.apellido,onChange:x,className:"w-full px-3 py-2 border ".concat(n.apellido?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"," text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.apellido&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.apellido})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"correo",className:"block text-sm font-medium text-gray-700 mb-1",children:["Correo ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"email",id:"correo",name:"correo",required:!0,value:i.correo,onChange:x,className:"w-full px-3 py-2 border ".concat(n.correo?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"," text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.correo&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.correo})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-1",children:["Tel\xe9fono ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"tel",id:"telefono",name:"telefono",required:!0,placeholder:"XXXX-XXXX",value:i.telefono,onChange:x,className:"w-full px-3 py-2 border ".concat(n.telefono?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"," text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.telefono&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.telefono}),!n.telefono&&(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Formato: XXXX-XXXX"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"fecha_nacimiento",className:"block text-sm font-medium text-gray-700 mb-1",children:["Fecha de Nacimiento ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"date",id:"fecha_nacimiento",name:"fecha_nacimiento",required:!0,value:i.fecha_nacimiento,onChange:x,className:"w-full px-3 py-2 border ".concat(n.fecha_nacimiento?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"," text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.fecha_nacimiento&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.fecha_nacimiento})]}),!r&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:["Contrase\xf1a ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"password",id:"password",name:"password",required:!r,value:i.password,onChange:x,className:"w-full px-3 py-2 border ".concat(n.password?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"," text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.password&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.password}),r&&(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Dejar en blanco para mantener la contrase\xf1a actual"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("label",{htmlFor:"direccion",className:"block text-sm font-medium text-gray-700 mb-1",children:["Direcci\xf3n ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("textarea",{id:"direccion",name:"direccion",rows:2,required:!0,value:i.direccion,onChange:x,className:"w-full px-3 py-2 border ".concat(n.direccion?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"," text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),n.direccion&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:n.direccion})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("label",{htmlFor:"historia_clinica",className:"block text-sm font-medium text-gray-700 mb-1",children:["Historia Cl\xednica ",(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:"(Opcional)"})]}),(0,s.jsx)("textarea",{id:"historia_clinica",name:"historia_clinica",rows:4,value:i.historia_clinica,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t mt-6",children:[(0,s.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:t,className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] flex items-center transition-colors duration-200",disabled:c,children:[(0,s.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),(0,s.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500 flex items-center",disabled:c,children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-2"}),c?"Guardando...":"Guardar"]})]})]})})]})};var j=a(1666);let N=[{id:"1",nombre:"Mar\xeda",apellido:"Garc\xeda",correo:"maria.garcia@example.com",telefono:"7123-4567",fecha_nacimiento:"1985-06-15",direccion:"Calle Principal #123, San Miguel",historia_clinica:"Paciente con historial de tratamientos ortod\xf3nticos.",role:"paciente"},{id:"2",nombre:"Juan",apellido:"P\xe9rez",correo:"juan.perez@example.com",telefono:"7234-5678",fecha_nacimiento:"1990-03-22",direccion:"Avenida Central #456, San Miguel",role:"paciente"},{id:"3",nombre:"Ana",apellido:"Rodr\xedguez",correo:"ana.rodriguez@example.com",telefono:"7345-6789",fecha_nacimiento:"1978-11-10",direccion:"Colonia Las Flores #789, San Miguel",historia_clinica:"Paciente con sensibilidad dental.",role:"paciente"},{id:"4",nombre:"Carlos",apellido:"Mart\xednez",correo:"carlos.martinez@example.com",telefono:"7456-7890",fecha_nacimiento:"1995-08-05",direccion:"Residencial Los Pinos #101, San Miguel",role:"paciente"},{id:"5",nombre:"Laura",apellido:"S\xe1nchez",correo:"laura.sanchez@example.com",telefono:"7567-8901",fecha_nacimiento:"1982-04-30",direccion:"Barrio El Centro #234, San Miguel",historia_clinica:"Paciente con bruxismo.",role:"paciente"},{id:"6",nombre:"Roberto",apellido:"G\xf3mez",correo:"roberto.gomez@example.com",telefono:"7678-9012",fecha_nacimiento:"1975-12-18",direccion:"Colonia San Francisco #345, San Miguel",role:"paciente"},{id:"7",nombre:"Patricia",apellido:"Hern\xe1ndez",correo:"patricia.hernandez@example.com",telefono:"7789-0123",fecha_nacimiento:"1988-07-25",direccion:"Urbanizaci\xf3n Santa Mar\xeda #456, San Miguel",role:"paciente"},{id:"8",nombre:"Miguel",apellido:"D\xedaz",correo:"miguel.diaz@example.com",telefono:"7890-1234",fecha_nacimiento:"1992-09-14",direccion:"Pasaje Los Almendros #567, San Miguel",historia_clinica:"Paciente con tratamiento de ortodoncia en curso.",role:"paciente"},{id:"9",nombre:"Carmen",apellido:"L\xf3pez",correo:"carmen.lopez@example.com",telefono:"7901-2345",fecha_nacimiento:"1980-02-28",direccion:"Calle Las Palmas #678, San Miguel",role:"paciente"},{id:"10",nombre:"Fernando",apellido:"Torres",correo:"fernando.torres@example.com",telefono:"7012-3456",fecha_nacimiento:"1987-05-10",direccion:"Avenida Los Pinos #789, San Miguel",role:"paciente"},{id:"11",nombre:"Luc\xeda",apellido:"Ram\xedrez",correo:"lucia.ramirez@example.com",telefono:"7123-4567",fecha_nacimiento:"1993-01-15",direccion:"Colonia El Carmen #890, San Miguel",historia_clinica:"Paciente con historial de extracciones.",role:"paciente"},{id:"12",nombre:"Javier",apellido:"Morales",correo:"javier.morales@example.com",telefono:"7234-5678",fecha_nacimiento:"1979-10-20",direccion:"Residencial Las Flores #901, San Miguel",role:"paciente"}];function y(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}let w=()=>{let[e,r]=(0,o.useState)(N),[a,t]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null),[f,b]=(0,o.useState)(""),[g,w]=(0,o.useState)("list"),[k,C]=(0,o.useState)(1),[P,_]=(0,o.useState)(!1),[A,S]=(0,o.useState)({age:"Todos",lastVisit:"Cualquier fecha",status:"Todos",historiaClinica:"Todos"}),[M,T]=(0,o.useState)(!1),z=e=>{l(e),t(!0),w("edit")},E=e=>{l(e),w("view")},H=a=>{window.confirm("\xbfEst\xe1 seguro que desea eliminar este paciente?")&&r(e.filter(e=>e.id!==a))},X=(0,o.useMemo)(()=>{let r=y(f);return e.filter(e=>{if(!(y("".concat(e.nombre," ").concat(e.apellido)).includes(r)||y(e.correo).includes(r)||y(e.telefono).includes(r)))return!1;if(!M)return!0;if("Todos"!==A.age){let r=new Date(e.fecha_nacimiento),a=new Date,s=a.getFullYear()-r.getFullYear(),o=a.getMonth()>r.getMonth()||a.getMonth()===r.getMonth()&&a.getDate()>=r.getDate()?s:s-1;if("18-30 a\xf1os"===A.age&&(o<18||o>30)||"31-50 a\xf1os"===A.age&&(o<31||o>50)||"51+ a\xf1os"===A.age&&o<51)return!1}if("Todos"!==A.historiaClinica&&("Con historia"===A.historiaClinica&&!e.historia_clinica||"Sin historia"===A.historiaClinica&&e.historia_clinica))return!1;if("Cualquier fecha"!==A.lastVisit){let r=Number.parseInt(e.id),a=new Date;a.setDate(a.getDate()-30*r);let s=Math.floor((new Date().getTime()-a.getTime())/864e5);if("\xdaltimo mes"===A.lastVisit&&s>30||"\xdaltimos 3 meses"===A.lastVisit&&s>90||"\xdaltimo a\xf1o"===A.lastVisit&&s>365)return!1}if("Todos"!==A.status){let r=Number.parseInt(e.id)%5!=0;if("Activo"===A.status&&!r||"Inactivo"===A.status&&r)return!1}return!0})},[e,f,A,M]),F=Math.ceil(X.length/5),D=(0,o.useMemo)(()=>{let e=(k-1)*5;return X.slice(e,e+5)},[X,k]),L=e=>{let{name:r,value:a}=e.target;S(e=>({...e,[r]:a}))},q={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return"view"===g&&i?(0,s.jsxs)(p.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Detalles del Paciente"}),(0,s.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>w("list"),className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] flex items-center transition-colors duration-200",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-1"}),"Volver"]})]}),(0,s.jsxs)(p.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3},className:"bg-[hsl(var(--card))] transition-colors duration-200 shadow-md rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-[hsl(var(--foreground))] mb-4 pb-2 border-b border-[hsl(var(--border))]",children:"Informaci\xf3n Personal"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Nombre:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:"".concat(i.nombre," ").concat(i.apellido)})]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Correo:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:i.correo})]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Tel\xe9fono:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:i.telefono})]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Fecha de Nacimiento:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:new Date(i.fecha_nacimiento).toLocaleDateString("es-ES")})]}),(0,s.jsxs)("p",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"font-semibold w-40 text-[hsl(var(--foreground))]",children:"Direcci\xf3n:"}),(0,s.jsx)("span",{className:"text-[hsl(var(--foreground))]",children:i.direccion})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-[hsl(var(--foreground))] mb-4 pb-2 border-b border-[hsl(var(--border))]",children:"Historia Cl\xednica"}),(0,s.jsx)("div",{className:"bg-[hsl(var(--secondary))] transition-colors duration-200 p-4 rounded-md min-h-48",children:i.historia_clinica?(0,s.jsx)("p",{className:"text-[hsl(var(--foreground))]",children:i.historia_clinica}):(0,s.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] italic",children:"No hay historia cl\xednica disponible."})})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex space-x-4 justify-end",children:[(0,s.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>z(i),className:"px-4 py-2 bg-amber-400 text-white rounded-md hover:bg-amber-500 flex items-center",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Editar"]}),(0,s.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>H(i.id),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 flex items-center",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Eliminar"]})]})]})]}):"edit"===g?(0,s.jsx)(v,{patient:i,onSave:a=>{if(i)r(e.map(e=>e.id===i.id?{...e,...a}:e));else{let s={id:(Math.max(...e.map(e=>Number.parseInt(e.id)))+1).toString(),nombre:a.nombre||"",apellido:a.apellido||"",correo:a.correo||"",telefono:a.telefono||"",direccion:a.direccion||"",fecha_nacimiento:a.fecha_nacimiento||"",historia_clinica:a.historia_clinica,role:"paciente"};r([...e,s])}t(!1),w("list")},onCancel:()=>{t(!1),w("list")}}):(0,s.jsxs)(p.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Gesti\xf3n de Pacientes"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>_(!P),className:"flex items-center px-3 py-2 border rounded-md text-sm font-medium transition-colors duration-200 ".concat(M?"bg-red-50 dark:bg-red-900/20 border-red-300 dark:border-red-800 text-red-700 dark:text-red-400":"bg-[hsl(var(--card))] border-[hsl(var(--border))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--card-hover))]"),children:[(0,s.jsx)(m.A,{className:"h-4 w-4 mr-2 ".concat(M?"text-red-500 dark:text-red-400":"text-[hsl(var(--muted-foreground))]")}),"Filtros",M&&(0,s.jsx)("span",{className:"ml-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 text-xs font-semibold px-1.5 py-0.5 rounded-full",children:"Activos"})]}),(0,s.jsxs)(p.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{l(null),t(!0),w("edit")},className:"flex items-center px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500",children:[(0,s.jsx)(h.A,{className:"h-5 w-5 mr-1"}),"Nuevo Paciente"]})]})]}),P&&(0,s.jsxs)(p.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-[hsl(var(--card))] p-4 rounded-lg shadow-md transition-colors duration-200",children:[(0,s.jsx)("h3",{className:"font-medium text-[hsl(var(--foreground))] mb-3",children:"Filtros avanzados"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Edad"}),(0,s.jsxs)("select",{name:"age",value:A.age,onChange:L,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,s.jsx)("option",{children:"Todos"}),(0,s.jsx)("option",{children:"18-30 a\xf1os"}),(0,s.jsx)("option",{children:"31-50 a\xf1os"}),(0,s.jsx)("option",{children:"51+ a\xf1os"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"\xdaltima visita"}),(0,s.jsxs)("select",{name:"lastVisit",value:A.lastVisit,onChange:L,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,s.jsx)("option",{children:"Cualquier fecha"}),(0,s.jsx)("option",{children:"\xdaltimo mes"}),(0,s.jsx)("option",{children:"\xdaltimos 3 meses"}),(0,s.jsx)("option",{children:"\xdaltimo a\xf1o"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Estado"}),(0,s.jsxs)("select",{name:"status",value:A.status,onChange:L,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,s.jsx)("option",{children:"Todos"}),(0,s.jsx)("option",{children:"Activo"}),(0,s.jsx)("option",{children:"Inactivo"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Historia Cl\xednica"}),(0,s.jsxs)("select",{name:"historiaClinica",value:A.historiaClinica,onChange:L,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,s.jsx)("option",{children:"Todos"}),(0,s.jsx)("option",{children:"Con historia"}),(0,s.jsx)("option",{children:"Sin historia"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,s.jsx)("button",{onClick:()=>{S({age:"Todos",lastVisit:"Cualquier fecha",status:"Todos",historiaClinica:"Todos"}),T(!1)},className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] mr-2 transition-colors duration-200",children:"Limpiar"}),(0,s.jsx)("button",{onClick:()=>{T(!0),C(1)},className:"px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500 transition-colors duration-200",children:"Aplicar filtros"})]})]}),(0,s.jsxs)("div",{className:"bg-[hsl(var(--card))] transition-colors duration-200 shadow-md rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-[hsl(var(--border))]",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(x.A,{className:"h-5 w-5 text-[hsl(var(--muted-foreground))]"})}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar pacientes por nombre, correo o tel\xe9fono...",className:"pl-10 pr-4 py-2 w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",value:f,onChange:e=>{b(e.target.value),C(1)}})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(p.P.table,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},initial:"hidden",animate:"visible",className:"min-w-full divide-y divide-[hsl(var(--border))]",children:[(0,s.jsx)("thead",{className:"bg-[hsl(var(--secondary))]",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Nombre"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Correo"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Tel\xe9fono"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Fecha de Nacimiento"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-[hsl(var(--card))] transition-colors duration-200 divide-y divide-[hsl(var(--border))]",children:D.map(e=>(0,s.jsxs)(p.P.tr,{variants:q,className:"hover:bg-[hsl(var(--card-hover))] transition-colors duration-150",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-[hsl(var(--foreground))]",children:"".concat(e.nombre," ").concat(e.apellido)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:e.correo})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:e.telefono})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:new Date(e.fecha_nacimiento).toLocaleDateString("es-ES")})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(p.P.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>E(e),className:"text-[hsl(var(--muted-foreground))] hover:text-[hsl(var(--foreground))] p-1 rounded-full hover:bg-[hsl(var(--secondary))] transition-colors duration-200",title:"Ver detalles",children:(0,s.jsx)(u.A,{className:"h-5 w-5"})}),(0,s.jsx)(p.P.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>z(e),className:"text-amber-500 hover:text-amber-600 p-1 rounded-full hover:bg-amber-50 dark:hover:bg-amber-900/20",title:"Editar",children:(0,s.jsx)(d.A,{className:"h-5 w-5"})}),(0,s.jsx)(p.P.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>H(e.id),className:"text-red-500 hover:text-red-600 p-1 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20",title:"Eliminar",children:(0,s.jsx)(c.A,{className:"h-5 w-5"})})]})})]},e.id))})]})}),0===X.length?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsxs)(p.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center",children:[(0,s.jsx)(x.A,{className:"h-12 w-12 text-[hsl(var(--muted-foreground))] mb-3"}),(0,s.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] text-lg",children:"No se encontraron pacientes"}),(0,s.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] text-sm mt-1",children:"Intenta con otra b\xfasqueda o agrega un nuevo paciente"})]})}):(0,s.jsx)(j.A,{currentPage:k,totalPages:F,onPageChange:C})]})]})};function k(){let e=(0,t.useRouter)(),{isAuthenticated:r}=(0,i.A)(),[a,n]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{n(!0),a&&!r&&e.push("/")},[r,e,a]),a)?a&&!r?null:(0,s.jsx)(l.A,{children:(0,s.jsx)(w,{})}):(0,s.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Cargando..."})})}},7924:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});let s=(0,a(9946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[766,725,32,441,684,358],()=>r(2293)),_N_E=e.O()}]);