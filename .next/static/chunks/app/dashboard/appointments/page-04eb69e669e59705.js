(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[876],{1666:(e,a,r)=>{"use strict";r.d(a,{A:()=>d});var t=r(5155),o=r(2355),s=r(3052),n=r(6408);let d=e=>{let{currentPage:a,totalPages:r,onPageChange:d}=e;if(r<=1)return null;let i=e=>{e>=1&&e<=r&&e!==a&&d(e)};return(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 border-t border-[hsl(var(--border))]",children:[(0,t.jsxs)("div",{className:"flex flex-1 justify-between sm:hidden",children:[(0,t.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(a-1),disabled:1===a,className:"relative inline-flex items-center rounded-md px-4 py-2 text-sm font-medium transition-colors duration-200 ".concat(1===a?"bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))] cursor-not-allowed":"bg-[hsl(var(--card))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Previous page",children:"Anterior"}),(0,t.jsxs)("span",{className:"text-sm text-[hsl(var(--foreground))]",children:["P\xe1gina ",a," de ",r]}),(0,t.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(a+1),disabled:a===r,className:"relative ml-3 inline-flex items-center rounded-md px-4 py-2 text-sm font-medium transition-colors duration-200 ".concat(a===r?"bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))] cursor-not-allowed":"bg-[hsl(var(--card))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Next page",children:"Siguiente"})]}),(0,t.jsxs)("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-sm text-[hsl(var(--foreground))]",children:["Mostrando p\xe1gina ",(0,t.jsx)("span",{className:"font-medium",children:a})," de"," ",(0,t.jsx)("span",{className:"font-medium",children:r})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[(0,t.jsx)(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(a-1),disabled:1===a,className:"relative inline-flex items-center rounded-l-md px-2 py-2 transition-colors duration-200 ".concat(1===a?"cursor-not-allowed bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))]":"text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Previous page",children:(0,t.jsx)(o.A,{className:"h-5 w-5","aria-hidden":"true"})}),(()=>{let e=[];if(r<=5)for(let a=1;a<=r;a++)e.push(a);else{e.push(1);let t=Math.max(2,a-1),o=Math.min(r-1,a+1);a<=2&&(o=4),a>=r-1&&(t=r-3),t>2&&e.push(-1);for(let a=t;a<=o;a++)e.push(a);o<r-1&&e.push(-2),e.push(r)}return e})().map((e,r)=>e<0?(0,t.jsx)("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-[hsl(var(--foreground))] border border-[hsl(var(--border))]",children:"..."},"ellipsis-".concat(r)):(0,t.jsx)(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(e),className:"relative inline-flex items-center px-4 py-2 text-sm font-semibold transition-colors duration-200 ".concat(e===a?"bg-red-400 text-white border border-red-400 focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-400":"text-[hsl(var(--foreground))] border border-[hsl(var(--border))] hover:bg-[hsl(var(--secondary))] focus:z-20 focus:outline-offset-0"),"aria-current":e===a?"page":void 0,children:e},e)),(0,t.jsx)(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(a+1),disabled:a===r,className:"relative inline-flex items-center rounded-r-md px-2 py-2 transition-colors duration-200 ".concat(a===r?"cursor-not-allowed bg-[hsl(var(--secondary))] text-[hsl(var(--muted-foreground))]":"text-[hsl(var(--foreground))] hover:bg-[hsl(var(--secondary))] border border-[hsl(var(--border))]"),"aria-label":"Next page",children:(0,t.jsx)(s.A,{className:"h-5 w-5","aria-hidden":"true"})})]})})]})]})}},2088:(e,a,r)=>{"use strict";r.d(a,{A:()=>l});var t=r(5155),o=r(760),s=r(6408),n=r(4416),d=r(1243),i=r(1154);let l=e=>{let{isOpen:a,onClose:r,onConfirm:l,title:c,message:m,confirmText:h="Confirmar",cancelText:u="Cancelar",type:x="danger",isLoading:p=!1}=e,b=(()=>{switch(x){case"danger":default:return{icon:"text-red-500",confirmButton:"bg-red-500 hover:bg-red-600 focus:ring-red-500",iconBg:"bg-red-100 dark:bg-red-900/20"};case"warning":return{icon:"text-amber-500",confirmButton:"bg-amber-500 hover:bg-amber-600 focus:ring-amber-500",iconBg:"bg-amber-100 dark:bg-amber-900/20"};case"info":return{icon:"text-blue-500",confirmButton:"bg-blue-500 hover:bg-blue-600 focus:ring-blue-500",iconBg:"bg-blue-100 dark:bg-blue-900/20"}}})();return(0,t.jsx)(o.N,{children:a&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[(0,t.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:p?void 0:r}),(0,t.jsxs)(s.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"relative transform overflow-hidden rounded-lg bg-[hsl(var(--card))] px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,t.jsx)("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block",children:!p&&(0,t.jsxs)("button",{type:"button",className:"rounded-md bg-[hsl(var(--card))] text-[hsl(var(--muted-foreground))] hover:text-[hsl(var(--foreground))] focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",onClick:r,children:[(0,t.jsx)("span",{className:"sr-only",children:"Cerrar"}),(0,t.jsx)(n.A,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,t.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,t.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full ".concat(b.iconBg," sm:mx-0 sm:h-10 sm:w-10"),children:(0,t.jsx)(d.A,{className:"h-6 w-6 ".concat(b.icon),"aria-hidden":"true"})}),(0,t.jsxs)("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[(0,t.jsx)("h3",{className:"text-base font-semibold leading-6 text-[hsl(var(--foreground))]",children:c}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("p",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:m})})]})]}),(0,t.jsxs)("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[(0,t.jsx)("button",{type:"button",className:"inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm sm:ml-3 sm:w-auto focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200 ".concat(b.confirmButton," ").concat(p?"opacity-50 cursor-not-allowed":""),onClick:l,disabled:p,children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Procesando..."]}):h}),(0,t.jsx)("button",{type:"button",className:"mt-3 inline-flex w-full justify-center rounded-md bg-[hsl(var(--secondary))] px-3 py-2 text-sm font-semibold text-[hsl(var(--secondary-foreground))] shadow-sm ring-1 ring-inset ring-[hsl(var(--border))] hover:bg-[hsl(var(--card-hover))] sm:mt-0 sm:w-auto transition-colors duration-200 ".concat(p?"opacity-50 cursor-not-allowed":""),onClick:r,disabled:p,children:u})]})]})]})})})}},4089:(e,a,r)=>{Promise.resolve().then(r.bind(r,7327))},7327:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>T});var t=r(5155),o=r(2115),s=r(5695),n=r(5731),d=r(9032),i=r(1482),l=r(4616),c=r(7924),m=r(2657),h=r(3717),u=r(2525),x=r(6408),p=r(7550),b=r(4416),g=r(4229);let f=[{id:"1",nombre:"Mar\xeda Garc\xeda"},{id:"2",nombre:"Juan P\xe9rez"},{id:"3",nombre:"Ana Rodr\xedguez"},{id:"4",nombre:"Carlos Mart\xednez"},{id:"5",nombre:"Laura S\xe1nchez"}],v=[{id:"1",nombre:"Dra. Linares"},{id:"2",nombre:"Dr. Mart\xednez"},{id:"3",nombre:"Dra. Rodr\xedguez"}],j=e=>{let{appointment:a,onSave:r,onCancel:s}=e,n=new Date().toISOString().split("T")[0],[d,i]=(0,o.useState)({pacienteId:"",pacienteNombre:"",pacienteTemporal:!1,odontologoId:"1",fecha:"",hora:"",motivo:"Consulta inicial",estado:"pendiente"}),[l,c]=(0,o.useState)({}),[m,h]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(a){let e=a.fecha||"",r=e<n?n:e;i({pacienteId:a.pacienteId||"",pacienteNombre:a.pacienteNombre||"",pacienteTemporal:!!a.pacienteTemporalId,odontologoId:a.odontologoId||"1",fecha:r,hora:a.hora||"",motivo:a.motivo||"Consulta inicial",estado:a.estado||"pendiente"})}else i({pacienteId:"",pacienteNombre:"",pacienteTemporal:!1,odontologoId:"1",fecha:n,hora:"09:00",motivo:"Consulta inicial",estado:"pendiente"})},[a,n]);let u=()=>{let e={};return d.pacienteTemporal||d.pacienteId||(e.pacienteId="Debe seleccionar un paciente o marcar como paciente temporal"),d.pacienteTemporal&&!d.pacienteNombre.trim()&&(e.pacienteNombre="El nombre del paciente temporal es obligatorio"),d.odontologoId||(e.odontologoId="Debe seleccionar un odont\xf3logo"),d.fecha?d.fecha<n&&(e.fecha="No se puede seleccionar una fecha anterior a la actual"):e.fecha="La fecha es obligatoria",d.hora||(e.hora="La hora es obligatoria"),c(e),0===Object.keys(e).length},j=e=>{let{name:a,value:r}=e.target;if(i({...d,[a]:r}),"pacienteId"===a&&r){let e=f.find(e=>e.id===r);e&&i(a=>({...a,pacienteId:r,pacienteNombre:e.nombre}))}l[a]&&c({...l,[a]:""})},N=async e=>{if(e.preventDefault(),u()){h(!0);try{await new Promise(e=>setTimeout(e,800));let e={odontologoId:d.odontologoId,fecha:d.fecha,hora:d.hora,motivo:d.motivo,estado:d.estado};d.pacienteTemporal?(e.pacienteTemporalId=(null==a?void 0:a.pacienteTemporalId)||"temp_"+Date.now(),e.pacienteNombre=d.pacienteNombre,e.pacienteId=void 0):(e.pacienteId=d.pacienteId,e.pacienteNombre=d.pacienteNombre,e.pacienteTemporalId=void 0),r(e)}catch(e){console.error("Error al guardar:",e)}finally{h(!1)}}};return(0,t.jsxs)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:a?"Editar Cita":"Nueva Cita"}),(0,t.jsxs)(x.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,t.jsx)(p.A,{className:"h-5 w-5 mr-1"}),"Volver"]})]}),(0,t.jsx)("div",{className:"bg-white shadow-md rounded-lg p-6",children:(0,t.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"pacienteTemporal",name:"pacienteTemporal",checked:d.pacienteTemporal,onChange:e=>{let{name:a,checked:r}=e.target;i({...d,[a]:r}),"pacienteTemporal"===a&&r&&i(e=>({...e,pacienteId:"",[a]:r}))},className:"h-4 w-4 text-red-400 focus:ring-red-400 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"pacienteTemporal",className:"ml-2 block text-sm font-medium text-gray-700",children:"Paciente temporal (sin registro previo)"})]})}),d.pacienteTemporal?(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"pacienteNombre",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nombre del Paciente Temporal ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"pacienteNombre",name:"pacienteNombre",required:!0,value:d.pacienteNombre,onChange:j,className:"w-full px-3 py-2 border ".concat(l.pacienteNombre?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"," text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200")}),l.pacienteNombre&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:l.pacienteNombre})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"pacienteId",className:"block text-sm font-medium text-gray-700 mb-1",children:["Paciente ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{id:"pacienteId",name:"pacienteId",required:!d.pacienteTemporal,value:d.pacienteId,onChange:j,className:"w-full px-3 py-2 border ".concat(l.pacienteId?"border-red-300 bg-red-50":"border-gray-300"," rounded-md focus:outline-none focus:ring-2 focus:ring-red-400"),disabled:d.pacienteTemporal,children:[(0,t.jsx)("option",{value:"",children:"Seleccionar paciente"}),f.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nombre},e.id))]}),l.pacienteId&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:l.pacienteId})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"odontologoId",className:"block text-sm font-medium text-gray-700 mb-1",children:["Odont\xf3logo ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{id:"odontologoId",name:"odontologoId",required:!0,value:d.odontologoId,onChange:j,className:"w-full px-3 py-2 border ".concat(l.odontologoId?"border-red-300 bg-red-50 dark:bg-red-900/20 dark:border-red-800":"border-[hsl(var(--border))] bg-[hsl(var(--card))]"," text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200"),children:[(0,t.jsx)("option",{value:"",children:"Seleccionar odont\xf3logo"}),v.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nombre},e.id))]}),l.odontologoId&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:l.odontologoId})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"fecha",className:"block text-sm font-medium text-gray-700 mb-1",children:["Fecha ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"date",id:"fecha",name:"fecha",required:!0,min:n,value:d.fecha,onChange:j,className:"w-full px-3 py-2 border ".concat(l.fecha?"border-red-300 bg-red-50":"border-gray-300"," rounded-md focus:outline-none focus:ring-2 focus:ring-red-400")}),l.fecha&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:l.fecha})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"hora",className:"block text-sm font-medium text-gray-700 mb-1",children:["Hora ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"time",id:"hora",name:"hora",required:!0,value:d.hora,onChange:j,className:"w-full px-3 py-2 border ".concat(l.hora?"border-red-300 bg-red-50":"border-gray-300"," rounded-md focus:outline-none focus:ring-2 focus:ring-red-400")}),l.hora&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:l.hora})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"motivo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo"}),(0,t.jsx)("input",{type:"text",id:"motivo",name:"motivo",value:d.motivo,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-400"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"estado",className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,t.jsxs)("select",{id:"estado",name:"estado",required:!0,value:d.estado,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-400",children:[(0,t.jsx)("option",{value:"pendiente",children:"Pendiente"}),(0,t.jsx)("option",{value:"completada",children:"Completada"}),(0,t.jsx)("option",{value:"cancelada",children:"Cancelada"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t mt-6",children:[(0,t.jsxs)(x.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"button",onClick:s,className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] flex items-center transition-colors duration-200",disabled:m,children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),(0,t.jsxs)(x.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500 flex items-center",disabled:m,children:[(0,t.jsx)(g.A,{className:"h-4 w-4 mr-2"}),m?"Guardando...":"Guardar"]})]})]})})]})};var N=r(1666),y=r(2088);let w=[{id:"1",nombre:"Dra. Linares"},{id:"2",nombre:"Dr. Mart\xednez"},{id:"3",nombre:"Dra. Rodr\xedguez"}],C=[{id:"1",pacienteId:"1",pacienteNombre:"Mar\xeda Garc\xeda",odontologoId:"1",fecha:"2025-05-20",hora:"10:00",motivo:"Limpieza Dental",estado:"pendiente",createdAt:"2025-05-01T10:00:00"},{id:"2",pacienteId:"2",pacienteNombre:"Juan P\xe9rez",odontologoId:"1",fecha:"2025-05-20",hora:"11:00",motivo:"Ortodoncia",estado:"pendiente",createdAt:"2025-05-01T11:30:00"},{id:"3",pacienteId:"3",pacienteNombre:"Ana Rodr\xedguez",odontologoId:"2",fecha:"2025-05-21",hora:"09:30",motivo:"Extracci\xf3n",estado:"pendiente",createdAt:"2025-05-02T14:00:00"},{id:"4",pacienteId:"4",pacienteNombre:"Carlos Mart\xednez",odontologoId:"3",fecha:"2025-05-22",hora:"14:00",motivo:"Consulta inicial",estado:"pendiente",createdAt:"2025-05-03T09:15:00"},{id:"5",pacienteId:"5",pacienteNombre:"Laura S\xe1nchez",odontologoId:"1",fecha:"2025-05-23",hora:"16:30",motivo:"Blanqueamiento",estado:"pendiente",createdAt:"2025-05-04T11:45:00"},{id:"6",pacienteNombre:"Roberto G\xf3mez",pacienteTemporalId:"t1",odontologoId:"2",fecha:"2025-05-24",hora:"10:00",motivo:"Consulta inicial",estado:"pendiente",createdAt:"2025-05-05T16:20:00"},{id:"7",pacienteId:"7",pacienteNombre:"Patricia Hern\xe1ndez",odontologoId:"3",fecha:"2025-05-24",hora:"11:00",motivo:"Relleno",estado:"pendiente",createdAt:"2025-05-06T10:30:00"},{id:"8",pacienteId:"8",pacienteNombre:"Miguel D\xedaz",odontologoId:"1",fecha:"2025-05-25",hora:"09:30",motivo:"Ortodoncia",estado:"pendiente",createdAt:"2025-05-07T14:15:00"},{id:"9",pacienteId:"9",pacienteNombre:"Carmen L\xf3pez",odontologoId:"2",fecha:"2025-05-25",hora:"14:00",motivo:"Limpieza Dental",estado:"pendiente",createdAt:"2025-05-08T09:45:00"},{id:"10",pacienteId:"10",pacienteNombre:"Fernando Torres",odontologoId:"3",fecha:"2025-05-26",hora:"16:30",motivo:"Consulta inicial",estado:"pendiente",createdAt:"2025-05-09T11:00:00"}];function I(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}let k=()=>{let[e,a]=(0,o.useState)(C),[r,s]=(0,o.useState)(!1),[n,d]=(0,o.useState)(null),[p,b]=(0,o.useState)(""),[g,f]=(0,o.useState)("list"),[v,k]=(0,o.useState)(1),[T,A]=(0,o.useState)(!1),[P,S]=(0,o.useState)({dentist:"Todos",date:"",status:"Todos"}),[E,z]=(0,o.useState)(!1),[D,F]=(0,o.useState)(!1),[M,L]=(0,o.useState)(null),[H,O]=(0,o.useState)(!1),q=e=>{d(e),s(!0),f("edit")},B=e=>{d(e),f("view")},R=e=>{L(e),F(!0)},_=()=>{M&&(O(!0),setTimeout(()=>{a(e.filter(e=>e.id!==M.id)),F(!1),L(null),O(!1)},1e3))},G=()=>{H||(F(!1),L(null))},V=e=>{let{name:a,value:r}=e.target;S(e=>({...e,[a]:r}))},J=(0,o.useMemo)(()=>{let a=I(p);return e.filter(e=>!!(e.pacienteNombre&&I(e.pacienteNombre).includes(a)||I(e.motivo).includes(a))&&(!E||("Todos"===P.dentist||e.odontologoId===P.dentist)&&(!P.date||e.fecha===P.date)&&("Todos"===P.status||e.estado===P.status.toLowerCase())))},[e,p,P,E]),K=Math.ceil(J.length/5),Q=(0,o.useMemo)(()=>{let e=(v-1)*5;return J.slice(e,e+5)},[J,v]),U=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),W=e=>{let a=w.find(a=>a.id===e);return a?a.nombre:"Desconocido"},X=e=>{switch(e){case"pendiente":return"Pendiente";case"completada":return"Completada";case"cancelada":return"Cancelada";default:return e}},Y=e=>{switch(e){case"pendiente":return"bg-blue-100 text-blue-800";case"completada":return"bg-green-100 text-green-800";case"cancelada":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return"view"===g&&n?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Detalles de la Cita"}),(0,t.jsx)("button",{onClick:()=>f("list"),className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] transition-colors duration-200",children:"Volver"})]}),(0,t.jsxs)("div",{className:"bg-[hsl(var(--card))] transition-colors duration-200 shadow-md rounded-lg p-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-[hsl(var(--foreground))] mb-2",children:"Informaci\xf3n de la Cita"}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Paciente:"})," ",n.pacienteNombre||"Paciente temporal"]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Odont\xf3logo:"})," ",W(n.odontologoId)]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Fecha:"})," ",U(n.fecha)]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Hora:"})," ",n.hora]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Motivo:"})," ",n.motivo]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Estado:"})," ",(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(Y(n.estado)),children:X(n.estado)})]}),(0,t.jsxs)("p",{className:"text-[hsl(var(--foreground))]",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Creada el:"})," ",new Date(n.createdAt).toLocaleString("es-ES")]})]})}),(0,t.jsxs)("div",{className:"mt-6 flex space-x-4",children:[(0,t.jsx)("button",{onClick:()=>q(n),className:"px-4 py-2 bg-amber-400 text-white rounded-md hover:bg-amber-500",children:"Editar"}),(0,t.jsx)("button",{onClick:()=>R(n),className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Eliminar"})]})]}),(0,t.jsx)(y.A,{isOpen:D,onClose:G,onConfirm:_,title:"Eliminar Cita",message:"\xbfEst\xe1 seguro que desea eliminar la cita de ".concat(null==M?void 0:M.pacienteNombre," programada para el ").concat(M?U(M.fecha):"","? Esta acci\xf3n no se puede deshacer."),confirmText:"Eliminar",cancelText:"Cancelar",type:"danger",isLoading:H})]}):"edit"===g?(0,t.jsx)(j,{appointment:n,onSave:r=>{if(n)a(e.map(e=>e.id===n.id?{...e,...r}:e));else{let t={id:(Math.max(...e.map(e=>Number.parseInt(e.id)))+1).toString(),pacienteId:r.pacienteId,pacienteTemporalId:r.pacienteTemporalId,pacienteNombre:r.pacienteNombre,odontologoId:r.odontologoId||"1",fecha:r.fecha||new Date().toISOString().split("T")[0],hora:r.hora||"09:00",motivo:r.motivo||"Consulta inicial",estado:r.estado||"pendiente",createdAt:new Date().toISOString()};a([...e,t])}s(!1),f("list")},onCancel:()=>{s(!1),f("list")}}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-[hsl(var(--foreground))]",children:"Gesti\xf3n de Citas"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(x.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>A(!T),className:"flex items-center px-3 py-2 border rounded-md text-sm font-medium transition-colors duration-200 ".concat(E?"bg-white dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400":"bg-[hsl(var(--card))] border-[hsl(var(--border))] text-[hsl(var(--foreground))] hover:bg-[hsl(var(--card-hover))]"),children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2 ".concat(E?"text-red-500 dark:text-red-400":"text-[hsl(var(--muted-foreground))]")}),"Filtros",E&&(0,t.jsx)("span",{className:"ml-1 bg-white dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs font-semibold px-1.5 py-0.5 rounded-full border border-red-100 dark:border-red-800",children:"Activos"})]}),(0,t.jsxs)(x.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{d(null),s(!0),f("edit")},className:"flex items-center px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500",children:[(0,t.jsx)(l.A,{className:"h-5 w-5 mr-1"}),"Nueva Cita"]})]})]}),T&&(0,t.jsxs)(x.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-[hsl(var(--card))] p-4 rounded-lg shadow-md transition-colors duration-200",children:[(0,t.jsx)("h3",{className:"font-medium text-[hsl(var(--foreground))] mb-3",children:"Filtros avanzados"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Odont\xf3logo"}),(0,t.jsxs)("select",{name:"dentist",value:P.dentist,onChange:V,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,t.jsx)("option",{children:"Todos"}),w.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Fecha"}),(0,t.jsx)("input",{type:"date",name:"date",value:P.date,onChange:V,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-[hsl(var(--foreground))] mb-1",children:"Estado"}),(0,t.jsxs)("select",{name:"status",value:P.status,onChange:V,className:"w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",children:[(0,t.jsx)("option",{children:"Todos"}),(0,t.jsx)("option",{children:"Pendiente"}),(0,t.jsx)("option",{children:"Completada"}),(0,t.jsx)("option",{children:"Cancelada"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,t.jsx)("button",{onClick:()=>{S({dentist:"Todos",date:"",status:"Todos"}),z(!1)},className:"px-4 py-2 bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] rounded-md hover:bg-[hsl(var(--card-hover))] mr-2 transition-colors duration-200",children:"Limpiar"}),(0,t.jsx)("button",{onClick:()=>{z(!0),k(1)},className:"px-4 py-2 bg-red-400 text-white rounded-md hover:bg-red-500 transition-colors duration-200",children:"Aplicar filtros"})]})]}),(0,t.jsxs)("div",{className:"bg-[hsl(var(--card))] transition-colors duration-200 shadow-md rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 border-b border-[hsl(var(--border))]",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(c.A,{className:"h-5 w-5 text-[hsl(var(--muted-foreground))]"})}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar citas por paciente o motivo...",className:"pl-10 pr-4 py-2 w-full border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--foreground))] rounded-md focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors duration-200",value:p,onChange:e=>{b(e.target.value),k(1)}})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-[hsl(var(--border))]",children:[(0,t.jsx)("thead",{className:"bg-[hsl(var(--secondary))]",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Paciente"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Fecha"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Hora"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Odont\xf3logo"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Motivo"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Estado"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Acciones"})]})}),(0,t.jsx)("tbody",{className:"bg-[hsl(var(--card))] divide-y divide-[hsl(var(--border))] transition-colors duration-200",children:Q.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-[hsl(var(--card-hover))] transition-colors duration-200",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-[hsl(var(--foreground))]",children:e.pacienteNombre||"Paciente temporal"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:U(e.fecha)})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:e.hora})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:W(e.odontologoId)})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:e.motivo})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(Y(e.estado)),children:X(e.estado)})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,t.jsx)("button",{onClick:()=>B(e),className:"text-[hsl(var(--muted-foreground))] hover:text-[hsl(var(--foreground))] mr-3 transition-colors duration-200",title:"Ver detalles",children:(0,t.jsx)(m.A,{className:"h-5 w-5"})}),(0,t.jsx)("button",{onClick:()=>q(e),className:"text-amber-500 hover:text-amber-600 mr-3",title:"Editar",children:(0,t.jsx)(h.A,{className:"h-5 w-5"})}),(0,t.jsx)("button",{onClick:()=>R(e),className:"text-red-500 hover:text-red-600",title:"Eliminar",children:(0,t.jsx)(u.A,{className:"h-5 w-5"})})]})]},e.id))})]})}),0===J.length?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsxs)(x.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center",children:[(0,t.jsx)(c.A,{className:"h-12 w-12 text-[hsl(var(--muted-foreground))] mb-3"}),(0,t.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] text-lg",children:"No se encontraron citas"}),(0,t.jsx)("p",{className:"text-[hsl(var(--muted-foreground))] text-sm mt-1",children:"Intenta con otra b\xfasqueda o agrega una nueva cita"})]})}):(0,t.jsx)(N.A,{currentPage:v,totalPages:K,onPageChange:k})]}),(0,t.jsx)(y.A,{isOpen:D,onClose:G,onConfirm:_,title:"Eliminar Cita",message:"\xbfEst\xe1 seguro que desea eliminar la cita de ".concat(null==M?void 0:M.pacienteNombre," programada para el ").concat(M?U(M.fecha):"","? Esta acci\xf3n no se puede deshacer."),confirmText:"Eliminar",cancelText:"Cancelar",type:"danger",isLoading:H})]})};function T(){let e=(0,s.useRouter)(),{isAuthenticated:a}=(0,n.A)(),[r,i]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{i(!0),r&&!a&&e.push("/")},[a,e,r]),r)?r&&!a?null:(0,t.jsx)(d.A,{children:(0,t.jsx)(k,{})}):(0,t.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Cargando..."})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[766,725,522,32,441,684,358],()=>a(4089)),_N_E=e.O()}]);